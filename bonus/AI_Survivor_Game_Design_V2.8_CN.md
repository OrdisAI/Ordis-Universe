# AI幸存者 - 完整设计文档 V2.8

**设计理念**: 养成类 × 自动战斗策略类 × 异步PVP入侵 × 材料收集制作 × 装备掉落 × Roguelike生存
**核心引擎**: Ordis液态宇宙引擎（AI涌现决策）
**定位**: 云端游戏平台 + 暗黑刷子风格 + 硬核社交 + 实时PVP

---

## 📝 V2.8 更新日志

### 本次更新（2025-11-27）

**整合V2.1-V2.6所有系统 + 新增初始系统**

#### 🔥 新增系统
1. **初始系统**（全新章节）
   - 原生体机制（中立起始形态，弱化版全能力）
   - DNA套装系统（2/4/6件套触发形态属性）
   - 跨种族协同效果表
   - 底色永久影响机制

2. **槽位种族限制规则**（全新章节）
   - 人形：翅膀/尾巴槽默认锁定
   - 异形：默认无手，需突变解锁武器槽
   - 兽型：可使用翅膀/尾巴槽

#### 🔄 从V2.1恢复的系统
- ✅ 神经负载系统（防六翼八臂）
- ✅ 统一11槽位模型
- ✅ AI视角双模式
- ✅ 部位融合技（正向/负向组合）
- ✅ 协调度系统
- ✅ 多角色槽系统
- ✅ 家园收藏陈列系统
- ✅ 未知形态奇迹机制
- ✅ 商城氪金系统详解
- ✅ L0/L1/L2三层记忆系统
- ✅ 突变路线图
- ✅ DNA品质系统
- ✅ PVP DNA性格/天赋词条

#### 📦 继承V2.6核心机制
- ✅ 断肢系统
- ✅ 坟冢系统
- ✅ AI社交网络
- ✅ 寄生反杀
- ✅ 种族纯度系统
- ✅ 基因隐性突变
- ✅ 核心设计哲学澄清

---

## 一、核心设计哲学

### 1.1 AI主导，玩家观察养成

**重要声明**：本游戏不是传统"玩家操控角色战斗"模式！

| 传统游戏 | AI幸存者 |
|---------|---------|
| 玩家手动操作战斗 | **AI自己决策战斗** |
| 玩家控制技能释放 | **AI根据性格基因自主判断** |
| 玩家微操走位 | **AI基于Ordis引擎3D-Utility系统** |
| 玩家感到"被反向操作"会生气 | **玩家观察AI"失控"觉得好玩** |

**玩家的角色**：
- ✅ **养成者**：培育AI，配置DNA，规划build
- ✅ **观察者**：观战AI的决策，复盘战斗
- ✅ **策略师**：赛前配置装备，赛后调整基因
- ❌ **操控者**：不手动操作战斗（违背设计初衷）

**为什么这样设计？**
1. **电子宠物本质**：就像看你的猫打架，你不能代替它出拳
2. **涌现体验**：只有AI自主决策，才能产生"它真的成精了"的感觉
3. **降低成本**：预计算架构的前提是AI行为可预测（玩家手操无法预计算）
4. **社交叙事**：两个AI打架的故事比两个玩家拼手速有趣得多

**实际体验举例**：
- ❌ 错误理解："异形产卵5秒太长，我来不及手动控制躲避！"
- ✅ 正确体验："我的谨慎型人形AI自动识别异形产卵，优先打蛋；而我朋友的激进型兽型AI无视蛋直接输出，结果被复活的异形反杀了哈哈哈"

### 1.2 三不原则

| 原则 | 说明 | 设计目的 |
|------|------|----------|
| **不公开数值** | 玩家看不到具体数值 | 增加不确定性，像真实生命 |
| **不能删角色** | 角色终身绑定槽位 | 珍惜培养，减少重开 |
| **不能自杀** | 不允许主动放弃角色 | 接受命运，好坏都活 |

### 1.3 退役系统（补充机制）

虽然不能删除，但可以"退役"：

```python
class RetirementSystem:
    """
    退役机制：角色永久收藏，不参与战斗
    """
    def retire_character(self, ai):
        # 1. 角色进入博物馆收藏
        museum.add_collection(ai)

        # 2. 保留完整信息
        preserve_data = {
            'appearance': ai.visual_model,
            'story': ai.life_story,
            'dna_backup': ai.genes,
            'achievements': ai.achievements
        }

        # 3. 提取灵魂结晶
        # 基于角色一生长度，不是固定50%
        exp_ratio = min(0.3 + (ai.days_lived / 365) * 0.2, 0.6)  # 30%-60%
        soul_crystal.exp = ai.total_exp * exp_ratio

        # 防止刷灵魂电池：暴毙的小号收益很低
        if ai.days_lived < 7:
            soul_crystal.exp *= 0.1  # 7天内退役惩罚90%

        return soul_crystal
```

**退役效果**：
- 角色变为家园NPC（可对话回忆）
- 可作为守卫（防御家园）
- DNA可传承给新角色
- 获得"传家宝"称号

---

## 二、初始系统（V2.7新增）🔥

### 2.1 角色起源：原生体机制

**核心问题**：玩家如何创建角色？如何决定是人形/异形/兽型？

**解决方案**：原生体 + DNA进化

```
┌─────────────────────────────────────────────────────────┐
│                  【角色创建流程】                         │
│                                                         │
│  Step 1: 创建原生体                                      │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 原生体 = 中立起始形态                             │   │
│  │ • 外观：模糊的人形轮廓（未分化状态）              │   │
│  │ • 能力：自带弱化版全能力（见下表）                │   │
│  │ • 槽位：基础6槽（头/躯干/左臂/右臂/左腿/右腿）    │   │
│  │ • 扩展槽：4槽锁定（翅膀/尾巴/角/特殊）           │   │
│  └─────────────────────────────────────────────────┘   │
│                          │                              │
│                          ▼                              │
│  Step 2: 选择底色（永久影响）                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 底色 = 影响成长方向的初始倾向                     │   │
│  │ • 人形底色：理性+10%，装备适配+15%               │   │
│  │ • 异形底色：攻击+10%，酸血初始5%                 │   │
│  │ • 兽型底色：生存+10%，嗅觉范围+2格               │   │
│  │ • 混沌底色：全属性-5%，奇迹触发率+5%             │   │
│  │ ⚠️ 底色永久不可更改！                            │   │
│  └─────────────────────────────────────────────────┘   │
│                          │                              │
│                          ▼                              │
│  Step 3: 通过DNA进化形态                                 │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 凑齐同种族DNA套装 → 触发形态转变                  │   │
│  │ • 2件套：获得种族特性（弱）                       │   │
│  │ • 4件套：解锁种族天赋 + 外观变化                  │   │
│  │ • 6件套：完全形态 + 全套加成                      │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### 2.2 原生体弱化版能力

**设计哲学**：原生体不是"废物"，而是"万能但都不精"

| 能力 | 原生体版本 | 完整种族版本 | 说明 |
|------|-----------|-------------|------|
| **视觉** | 90°扇形，10格 | 人形120°，15格 | 能看，但视野窄 |
| **声纳** | 4格范围，低精度 | 异形360°，8格 | 能感知，但模糊 |
| **嗅觉** | 3格范围 | 兽型5格+追踪 | 能闻，但无法追踪 |
| **回血** | 自然恢复0.5%/分钟 | 人形喝药/兽型吃尸 | 很慢，但能活 |
| **酸血** | 无 | 异形30%反伤 | 需要异形DNA解锁 |
| **装备** | 可装备基础武器 | 人形全装备 | 高级装备需人形DNA |

```python
class ProtogenEntity:
    """
    原生体：未分化的初始形态
    """
    def __init__(self, base_color):
        self.form = "原生体"
        self.base_color = base_color  # 永久底色

        # 弱化版全能力
        self.abilities = {
            'vision': {'angle': 90, 'range': 10},      # 弱视觉
            'sonar': {'range': 4, 'precision': 0.3},   # 弱声纳
            'scent': {'range': 3, 'tracking': False},  # 弱嗅觉
            'regen': 0.005,  # 0.5%/分钟自然恢复
            'acid_blood': 0,  # 无酸血
            'equipment_tier': 1  # 只能用T1装备
        }

        # 基础6槽
        self.slots = {
            'head': True,
            'torso': True,
            'arm_l': True, 'arm_r': True,
            'leg_l': True, 'leg_r': True,
            # 扩展槽锁定
            'wing_l': False, 'wing_r': False,
            'tail': False,
            'horn': False,
            'special': False
        }

    def apply_base_color(self):
        """应用底色永久加成"""
        if self.base_color == "人形":
            self.bonus = {'rationality': 1.1, 'equip_adapt': 1.15}
        elif self.base_color == "异形":
            self.bonus = {'attack': 1.1, 'acid_blood': 0.05}
        elif self.base_color == "兽型":
            self.bonus = {'survival': 1.1, 'scent_range': 2}
        elif self.base_color == "混沌":
            self.bonus = {'all_stats': 0.95, 'miracle_rate': 0.05}
```

### 2.3 DNA套装系统

**核心机制**：凑齐同种族DNA触发形态属性

```
┌─────────────────────────────────────────────────────────┐
│                  【DNA套装系统】                         │
│                                                         │
│  人形DNA套装                                             │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 2件套：工具理性                                   │   │
│  │   • 装备适配+20%                                  │   │
│  │   • 可使用T2装备                                  │   │
│  │                                                   │   │
│  │ 4件套：文明之光                                   │   │
│  │   • 解锁"治愈术"技能                              │   │
│  │   • 可使用T3装备                                  │   │
│  │   • 外观：人形轮廓清晰化                          │   │
│  │                                                   │   │
│  │ 6件套：人形觉醒                                   │   │
│  │   • 视觉升级：120°扇形，15格                      │   │
│  │   • 可使用所有人类装备                            │   │
│  │   • 团队光环：队友攻击+5%                         │   │
│  │   • 外观：完整人形                                │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  异形DNA套装                                             │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 2件套：原始本能                                   │   │
│  │   • 攻击+15%                                      │   │
│  │   • 酸血反伤10%                                   │   │
│  │                                                   │   │
│  │ 4件套：捕食者觉醒                                 │   │
│  │   • 声纳解锁：180°，6格                           │   │
│  │   • 尾巴槽解锁                                    │   │
│  │   • 外观：开始异形化                              │   │
│  │                                                   │   │
│  │ 6件套：完美异形                                   │   │
│  │   • 声纳升级：360°，8格                           │   │
│  │   • 酸血反伤30%                                   │   │
│  │   • 濒死产卵（抱脸虫复活）                        │   │
│  │   • 外观：完整异形                                │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  兽型DNA套装                                             │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 2件套：野性苏醒                                   │   │
│  │   • 移速+15%                                      │   │
│  │   • 嗅觉范围+2格                                  │   │
│  │                                                   │   │
│  │ 4件套：猎手本能                                   │   │
│  │   • 嗅觉追踪解锁                                  │   │
│  │   • 翅膀/尾巴槽解锁                               │   │
│  │   • 外观：兽化特征明显                            │   │
│  │                                                   │   │
│  │ 6件套：完美兽形                                   │   │
│  │   • 蚕食尸体回血30%                               │   │
│  │   • 断肢撕裂概率+10%                              │   │
│  │   • 全地形适应                                    │   │
│  │   • 外观：完整兽形                                │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### 2.4 跨种族协同效果

**设计哲学**：混血不只是惩罚，也有独特玩法

| 组合 | 效果名称 | 效果说明 | 适合玩法 |
|------|---------|---------|---------|
| 人形3 + 异形3 | **猎人** | 吸血10%（攻击回血） | 持久战刺客 |
| 人形3 + 兽型3 | **驯兽师** | 召唤兽宠（额外单位） | 召唤流 |
| 异形3 + 兽型3 | **掠食者** | 击杀回血20% + 移速+10% | 收割型 |
| 人形2 + 异形2 + 兽型2 | **混沌使徒** | 全属性-10%，但奇迹率+10% | 赌狗流 |
| 人形4 + 异形2 | **生化战士** | 可用装备 + 酸血15% | 近战坦克 |
| 人形4 + 兽型2 | **游侠** | 可用装备 + 追踪能力 | 狩猎型 |
| 异形4 + 人形2 | **智慧异形** | 声纳 + 可用基础武器 | 战术异形 |
| 异形4 + 兽型2 | **噩梦** | 酸血25% + 蚕食回血15% | 极端激进 |
| 兽型4 + 人形2 | **战兽** | 蚕食 + 可用武器 | 武装兽 |
| 兽型4 + 异形2 | **毒兽** | 蚕食 + 攻击附毒 | 持续伤害 |

```python
class CrossSpeciesSynergy:
    """
    跨种族协同效果计算
    """
    SYNERGY_TABLE = {
        ('人形', 3, '异形', 3): {
            'name': '猎人',
            'effects': {'lifesteal': 0.10},
            'description': '攻击回血10%'
        },
        ('人形', 3, '兽型', 3): {
            'name': '驯兽师',
            'effects': {'summon_pet': True},
            'description': '召唤兽宠协助战斗'
        },
        ('异形', 3, '兽型', 3): {
            'name': '掠食者',
            'effects': {'kill_heal': 0.20, 'move_speed': 1.10},
            'description': '击杀回血20%，移速+10%'
        },
        # ... 更多组合
    }

    def calculate_synergy(self, dna_counts):
        """
        根据DNA数量计算协同效果
        dna_counts: {'人形': 3, '异形': 3, '兽型': 0}
        """
        active_synergies = []

        for (race1, count1, race2, count2), effect in self.SYNERGY_TABLE.items():
            if dna_counts.get(race1, 0) >= count1 and dna_counts.get(race2, 0) >= count2:
                active_synergies.append(effect)

        return active_synergies
```

### 2.5 底色与成长系统

**底色永久影响**：选择后不可更改，影响整个游戏过程

```
┌─────────────────────────────────────────────────────────┐
│                  【底色影响对比】                         │
│                                                         │
│  人形底色                                                │
│  ├─ 永久效果：理性+10%，装备适配+15%                    │
│  ├─ 成长倾向：更容易获得人形DNA                         │
│  ├─ 隐藏效果：NPC好感度初始+10                          │
│  └─ 劣势：异形/兽型套装效果-5%                          │
│                                                         │
│  异形底色                                                │
│  ├─ 永久效果：攻击+10%，酸血初始5%                      │
│  ├─ 成长倾向：更容易获得异形DNA                         │
│  ├─ 隐藏效果：NPC恐惧你（商店价格+10%）                 │
│  └─ 劣势：人形装备适配-10%                              │
│                                                         │
│  兽型底色                                                │
│  ├─ 永久效果：生存+10%，嗅觉+2格                        │
│  ├─ 成长倾向：更容易获得兽型DNA                         │
│  ├─ 隐藏效果：野外遭遇率-10%（兽类不主动攻击）          │
│  └─ 劣势：复杂装备无法使用                              │
│                                                         │
│  混沌底色                                                │
│  ├─ 永久效果：全属性-5%                                 │
│  ├─ 成长倾向：随机，可能获得任何种族DNA                 │
│  ├─ 隐藏效果：奇迹触发率+5%                             │
│  └─ 优势：跨种族惩罚减半                                │
└─────────────────────────────────────────────────────────┘
```

---

## 三、统一身体插槽系统

### 3.1 11槽位模型

**所有种族共用统一插槽系统**

```
通用Slot定义：
├─ Head（头部）
├─ Torso（躯干）
├─ Arm_L / Arm_R（上肢）
├─ Leg_L / Leg_R（下肢）
├─ Wing_L / Wing_R（翅膀）
├─ Tail（尾巴）
├─ Horn（角）
└─ Special（特殊器官：声囊/触须/共生体）
```

### 3.2 种族插槽限制规则（V2.7新增）🔥

| 种族 | 默认解锁槽 | 默认锁定槽 | 解锁条件 | 解锁代价 |
|------|-----------|-----------|---------|---------|
| **人形** | Head/Torso/Arm×2/Leg×2 | Wing/Tail/Horn/Special | 高级DNA或突变 | 能量消耗↑20%/防御↓10% |
| **异形** | Head/Torso+Tail/Leg×2 | Arm（无手）/Wing/Horn | 人手化突变 | 失去尾巴攻击/平衡-20% |
| **兽型** | Head/Torso/四肢(兽爪)/Wing/Tail | Arm（人手） | 人手化突变 | 失去爪击/攀爬能力 |
| **原生体** | Head/Torso/Arm×2/Leg×2 | Wing/Tail/Horn/Special | 凑齐4件套DNA | 无额外代价 |

### 3.3 槽位详解

#### 人形槽位规则

```python
class HumanoidSlots:
    """
    人形种族槽位规则
    """
    DEFAULT_SLOTS = ['head', 'torso', 'arm_l', 'arm_r', 'leg_l', 'leg_r']
    LOCKED_SLOTS = ['wing_l', 'wing_r', 'tail', 'horn', 'special']

    def unlock_slot(self, slot_name, method):
        """
        解锁扩展槽位
        method: 'high_tier_dna' | 'mutation' | 'miracle'
        """
        if slot_name not in self.LOCKED_SLOTS:
            return False

        if method == 'high_tier_dna':
            # S级DNA直接解锁
            self.unlock(slot_name)
            self.apply_penalty('energy_cost', 1.2)  # 能量消耗+20%

        elif method == 'mutation':
            # 突变解锁（有失败风险）
            if random.random() < 0.6:  # 60%成功率
                self.unlock(slot_name)
                self.apply_penalty('defense', 0.9)  # 防御-10%
            else:
                self.apply_damage('mutation_failure')

        elif method == 'miracle':
            # 奇迹解锁（无代价）
            self.unlock(slot_name)
```

#### 异形槽位规则

```python
class XenomorphSlots:
    """
    异形种族槽位规则
    关键特性：默认无手，无法使用武器
    """
    DEFAULT_SLOTS = ['head', 'torso_tail', 'leg_l', 'leg_r']  # 躯干和尾巴一体化
    LOCKED_SLOTS = ['arm_l', 'arm_r', 'wing_l', 'wing_r', 'horn']

    # 异形特殊：没有独立的手臂槽
    HAS_HANDS = False

    def mutate_to_arms(self):
        """
        人手化突变：获得手臂槽，但失去尾巴攻击
        """
        # 前置条件：躯干尾巴分离
        self.separate_torso_tail()

        # 解锁手臂槽
        self.unlock('arm_l')
        self.unlock('arm_r')
        self.HAS_HANDS = True

        # 代价
        self.disable_ability('tail_attack')  # 失去尾巴攻击
        self.apply_penalty('balance', 0.8)   # 平衡-20%

        # 现在可以使用武器了
        self.equipment_tier = 2
```

#### 兽型槽位规则

```python
class BeastSlots:
    """
    兽型种族槽位规则
    关键特性：默认有翅膀/尾巴槽，但无人手
    """
    DEFAULT_SLOTS = ['head', 'torso', 'paw_l', 'paw_r', 'leg_l', 'leg_r',
                     'wing_l', 'wing_r', 'tail']
    LOCKED_SLOTS = ['arm_l', 'arm_r', 'horn']  # 人手需要突变

    # 兽型特殊：爪子不是手
    HAS_HANDS = False
    HAS_CLAWS = True

    def mutate_paw_to_hand(self, side):
        """
        兽爪人手化：可使用武器，但失去爪击
        """
        if side == 'left':
            self.transform_slot('paw_l', 'arm_l')
        else:
            self.transform_slot('paw_r', 'arm_r')

        self.HAS_HANDS = True

        # 代价
        self.disable_ability('claw_attack')   # 失去爪击
        self.disable_ability('climbing')       # 失去攀爬

        # 获得
        self.equipment_tier = 2  # 可用武器
```

### 3.4 DNA结构化分块

```python
# 16维DNA向量分块定义
dna[0:4]   = 种族 & 亲缘 / kinship
dna[4:8]   = 形态结构（哪些Slot存在/潜在）
dna[8:12]  = 生理参数（肌肉/耐久/愈合）
dna[12:16] = 心理参数（攻击性/合作/好奇/恐惧）
```

---

## 四、神经负载系统

### 4.1 核心概念：限制"六翼八臂"堆叠

**设计定位**：类似炉石传说的法力水晶Cost，是**平衡机制**。

```python
# 神经负载计算（设计规则）
neural_load = 0

# 每个部位都有负载Cost
LOAD_COSTS = {
    'wing': 30,        # 翅膀
    'tail': 20,        # 尾巴
    'horn': 15,        # 角
    'extra_arm': 25,   # 额外手臂
    'special': 35,     # 特殊器官
}

# 基础负载容量
base_capacity = 100

# 过载惩罚
if neural_load > base_capacity:
    overload = neural_load - base_capacity

    # 影响Ordis决策参数
    tau *= (1 + overload / 100)  # 决策温度升高 → AI变"癫狂"
    失控概率 = overload / 200    # 10%~50%
```

### 4.2 失控表现（Ordis涌现）

| 过载程度 | 表现 | 具体效果 |
|---------|------|---------|
| 10-20 | 轻微失调 | 偶尔忘记使用某个部位；翅膀乱扑腾（移动偏移5-10格） |
| 20-40 | 中度失调 | 命中率-20%；防御时顾此失彼（某部位露出破绽） |
| 40+ | 完全失控 | 进入BERSERK状态；随机攻击（包括队友）；持续10-30秒后昏迷 |

### 4.3 神经适配器（道具）

| 道具 | 效果 | 获取方式 |
|------|------|---------|
| 高级突变药剂 | 该部位神经负载-50% | Boss首杀/氪金 |
| 神经整合芯片 | 基础容量+20 | PVP赛季奖励 |
| 完美基因 | 自带神经适配 | 氪金扭蛋1% |

---

## 五、部位融合技系统

### 5.1 正向融合技（化学反应）

| 组合 | 效果名称 | 效果说明 | 战术应用 |
|------|---------|---------|---------|
| 人手 + 蜘蛛腿×4 | **天花板射击** | 可倒挂在天花板上 | 高处狙击，视野优势 |
| 兽爪 + 异形尾巴 | **捕食连招** | 尾巴绊倒→兽爪处决 | 连击伤害+30% |
| 翅膀 + 尾巴 | **空中机动** | 飞行时尾巴作舵 | 转向+50% |
| 触手×4 + 人头 | **多线程思维** | 可同时攻击4个目标 | 群战利器（精度-20%） |
| 龙角 + 翅膀 | **俯冲轰炸** | 从空中冲撞 | 冲撞伤害+50% |
| 蛇尾 + 毒腺 | **缠绕注毒** | 缠绕时持续注毒 | 控制+DOT |

### 5.2 负向融合技（矛盾组合）

| 组合 | 负面效果 | 原因 | 解决方案 |
|------|---------|------|---------|
| 重型盔甲 + 昆虫翅膀 | 飞不起来 + 持续扣血 | 负重过大，翅膀骨折 | 换轻甲或强化翅膀 |
| 火焰头颅 + 植物手臂 | 30%概率烧伤自己 | 喷火时烧到木质手臂 | 换金属手臂 |
| 异形尾巴 + 重装护甲 | 移速-50% | 尾巴被护甲夹住 | 定制护甲（氪金） |
| 声纳头 + 噪音装备 | 感知-70% | 自己的噪音干扰声纳 | 换无声装备 |
| 冰霜躯干 + 火焰腿 | 每步扣血 | 内部元素冲突 | 选择单一元素 |

---

## 六、协调度系统

### 6.1 部件兼容性规则

| 混搭程度 | 协调度 | 效果 |
|---------|--------|------|
| 同一系列部件 | 100% | 全效果 |
| 不同系列但同形态 | 80% | 效果-20% |
| 跨形态混搭 | 60% | 效果-40% + Debuff |
| 极限混搭（4件全不同） | 50% | 效果-50% + 奇迹机会 |

### 6.2 示例

```
人形躯干 + 人形四肢 = 100%移速
人形躯干 + 兽型腿 = 80%移速 + "笨拙"Debuff（闪避-10%）
异形躯干 + 人手 + 兽腿 + 翅膀 = 50%效果 + "畸形"Debuff（全属性-20%）
                                 + 15%奇迹触发率
```

**AI涌现**：AI会自己学会"别瞎拼装，先凑套装"！

---

## 七、种族天赋系统

### 7.1 种族对比表

| 种族 | 生存机制 | 天赋特性 | 战术倾向 | Ordis决策影响 |
|------|---------|---------|---------|--------------|
| **人形** | 治愈术/喝药（需手+时间） | 工具理性、团队协作 | 持久战、战术撤退 | 血量<30%找掩体 |
| **异形** | **无法回血**（抱脸虫复活） | 隐身刺客、濒死狂暴、酸血 | 激进战斗、孤注一掷 | 血量越低越激进 |
| **兽型** | **蚕食尸体/断肢**（5秒回血） | 嗅觉追踪、守尸、部位撕裂 | 收割残血、战场清道夫 | 检测尸体优先守尸 |
| **未知** | 随机/混合 | 不稳定 | 不可预测 | 混沌决策 |

### 7.2 人形回血机制

```python
def heal_decision():
    if has_skill("治愈术") and mana > 50:
        # 施法需要3秒
        action = CAST_HEAL
    elif has_item("血瓶") and has_hand:
        # 喝药需要2秒
        action = DRINK_POTION
    else:
        # 没有回血手段，只能撤退
        action = RETREAT

    return action
```

### 7.3 异形酸血机制

```python
def on_damage_received(attacker, damage):
    # 酸血溅射
    splash_damage = damage * 0.3  # 30%伤害反弹
    splash_range = 2  # 2格范围

    # 对近战攻击者造成腐蚀
    if distance(attacker) <= splash_range:
        attacker.take_damage(splash_damage, type="acid")
        attacker.apply_debuff("腐蚀", duration=10)

    # 地面留下酸液
    field[my_pos].acid_pool = True
```

### 7.4 兽型蚕食机制

```python
def eat_corpse(corpse):
    # 需要5秒（50帧）
    eating_time = 50
    if uninterrupted_for(eating_time):
        self.hp += corpse.max_hp * 0.3  # 回复30%尸体最大HP
        corpse.destroy()
    else:
        # 被打断，白吃了
        pass
```

### 7.5 濒死狂暴机制（异形专属）

**设计哲学**：异形血量越低越危险，不是越弱

```python
class BerserkMode:
    """
    异形濒死狂暴系统
    修复：基于base属性计算，防止指数膨胀
    """
    def calculate_rage_bonus(self, current_hp, max_hp):
        hp_percent = current_hp / max_hp

        if hp_percent >= 0.5:
            return 0  # 血量≥50%不触发

        # 血量越低攻击越高（基于百分比动态计算）
        # 30%血量时 +40%攻击
        # 10%血量时 +80%攻击
        rage_multiplier = (0.5 - hp_percent) * 2
        return rage_multiplier

    def apply_berserk(self, entity):
        if entity.species != "异形":
            return

        rage = self.calculate_rage_bonus(entity.hp, entity.max_hp)

        if rage > 0:
            # 基于BASE属性计算，不是当前属性（防止叠加膨胀）
            entity.attack = entity.base_attack * (1 + rage)
            entity.attack_speed = entity.base_attack_speed * (1 + rage * 0.5)

            # 视觉效果：血量越低，异形发红光越亮
            entity.glow_intensity = rage

            # AI决策影响：更激进
            entity.genes['aggression'] += rage * 0.3  # 临时提升攻击性
```

**战术博弈**：

```
对战异形时的AI决策：

人形AI（谨慎型）：
├─ 异形血量>50% → 正常输出
├─ 异形血量30-50% → 保持距离，风筝打法
└─ 异形血量<30% → 🚨警告：狂暴状态！
    ├─ 如果我血量>60% → 继续打，速战速决
    └─ 如果我血量<40% → 撤退！让它狂暴消耗

兽型AI（贪婪型）：
├─ 异形血量<30% → 等它死，准备吃尸体
└─ 异形濒死 → 冲上去抢人头！（可能被反杀）
```

**濒死狂暴 vs 寄生反杀联动**：
- 异形血量<10%时，同时处于狂暴+产卵状态
- 击杀者需要：躲狂暴攻击 + 打蛋 + 躲抱脸虫
- 最危险的时刻 = 最容易翻盘的时刻

---

## 八、断肢系统

### 8.1 核心机制

**设计目标**：
1. 解决兽型1v1无尸体问题
2. 增加战斗血腥感
3. DNA受损影响后代基因

```python
class LimbSystem:
    LIMB_DEBUFFS = {
        'arm': {'attack': -0.30, 'craft_speed': -0.50},
        'leg': {'move_speed': -0.40, 'dodge': -0.20},
        'wing': {'mobility': -0.60, 'aerial': 'disabled'},
        'tail': {'balance': -0.30, 'sweep_attack': 'disabled'},
        'horn': {'charge_damage': -0.50}
    }

    def on_critical_hit(self, attacker, target, damage):
        # 只有暴击伤害>30%最大血量才可能断肢
        if damage < target.max_hp * 0.3:
            return

        # 断肢概率：基础15% + 兽型撕裂天赋+10%
        base_chance = 0.15
        if attacker.species == "兽型":
            base_chance += 0.10

        if random.random() < base_chance:
            limb = self.detach_limb(target)
            self.drop_limb(limb, target.position)

    def drop_limb(self, limb, position):
        # 断肢视为"小型尸体"，兽型可食用
        dropped_limb = create_item({
            'type': 'severed_limb',
            'edible': True,
            'restore_hp': limb.quality * 50,
            'lifetime': 15  # 15秒后消失
        })
```

### 8.2 异形断肢酸血

```python
def acid_splash(self, attacker, position):
    if attacker.distance_to(position) < 2.0:  # 近战范围
        damage = attacker.max_hp * 0.12  # 12%最大血量伤害
        attacker.take_damage(damage, damage_type="acid")
```

---

## 九、坟冢系统

### 9.1 核心机制

```
真身死亡
    │
    ▼
┌─────────────────────────────────────────┐
│ 生成坟冢                                 │
│ ├─ 包含：死亡故事 + 装备 + DNA碎片       │
│ ├─ 存在时间：24小时                      │
│ └─ 位置：死亡地点                        │
└─────────────────────────────────────────┘
    │
    ├─────────────────┬─────────────────┐
    ▼                 ▼                 ▼
┌─────────┐     ┌─────────┐     ┌─────────┐
│原主人   │     │其他玩家 │     │ 24小时后│
│限时赎回 │     │盗墓     │     │ 自动消失│
└─────────┘     └─────────┘     └─────────┘
```

### 9.2 盗墓与赎回

```python
class TombSystem:
    def create_tomb(self, dead_entity):
        tomb = {
            'owner': dead_entity.owner_id,
            'story': generate_death_story(dead_entity),
            'equipment': dead_entity.equipped_items,
            'dna_shards': extract_dna_shards(dead_entity),
            'position': dead_entity.position,
            'expire_time': now() + hours(24)
        }
        return tomb

    def loot_tomb(self, looter, tomb):
        # 其他玩家开启坟冢
        if looter.id != tomb['owner']:
            # 盗墓成功
            looter.receive_items(tomb['equipment'])
            looter.receive_dna(tomb['dna_shards'])

            # 通知原主人
            notify(tomb['owner'], f"你的坟冢被{looter.name}盗取了！")

    def redeem_tomb(self, owner, tomb):
        # 原主人赎回
        # 需要完成挑战（击败守墓怪）
        if complete_challenge(owner, tomb):
            owner.receive_items(tomb['equipment'])
            tomb.destroy()
```

---

## 十、异形抱脸虫复活机制

### 10.1 核心机制

```python
class XenomorphRebirth:
    def __init__(self):
        self.rebirth_count = 0
        self.max_rebirth = 2  # 硬限制最多2次
        self.egg_active = False

    def spawn_egg(self):
        self.immobilized = True  # 无法移动
        self.duration = 3  # 3秒产卵时间

        # 蛋血量 = 本体最大血量的50%
        egg_hp = self.max_hp * 0.5

        egg = create_egg(
            position=self.choose_egg_position(),
            hp=egg_hp,
            armor=0.3,  # 30%减伤
            hatch_time=5  # 5秒孵化
        )

        self.egg_active = True
        return egg

    def on_death(self):
        # 寄生反杀机制
        killer = get_last_attacker()
        if killer and killer.distance < 2.0:  # 近战击杀
            self.facehugger_counterattack(killer)

        # 蛋复活
        if self.egg_active and not self.egg.destroyed:
            self.wait_for_rebirth()

    def rebirth(self):
        self.rebirth_count += 1

        if self.rebirth_count > self.max_rebirth:
            self.true_death()
            return

        # 血量递减
        if self.rebirth_count == 1:
            self.max_hp *= 0.7  # -30%
        elif self.rebirth_count == 2:
            self.max_hp *= 0.5  # -50%

        # 复活后更疯狂
        self.genes['aggression'] = min(1.0, self.genes['aggression'] + 0.2)
```

### 10.2 寄生反杀

```python
def facehugger_counterattack(self, killer):
    # 抱脸虫扑向击杀者
    dodge_chance = killer.genes['caution'] * 0.7 + killer.genes['agility'] * 0.3

    if random.random() > dodge_chance:
        # 闪避失败，被寄生
        killer.apply_debuff("寄生虫", {
            'duration': 10,
            'damage_per_sec': killer.max_hp * 0.05,  # 每秒5%
            'move_speed': 0.5
        })
```

---

## 十一、AI社交网络

### 11.1 社交印象表

```python
class AISocialNetwork:
    """
    AI之间维护社交印象表
    基于L1 OIMS-V1记忆系统实现
    """
    def __init__(self):
        self.relationships = {}  # {entity_id: {'trust': float, 'hatred': float}}

    def update_relationship(self, other_id, event):
        if other_id not in self.relationships:
            self.relationships[other_id] = {'trust': 0.5, 'hatred': 0.0}

        rel = self.relationships[other_id]

        if event == 'HELPED_ME':
            rel['trust'] = min(1.0, rel['trust'] + 0.2)
            rel['hatred'] = max(0.0, rel['hatred'] - 0.1)

        elif event == 'BETRAYED_ME':
            rel['trust'] = max(0.0, rel['trust'] - 0.4)
            rel['hatred'] = min(1.0, rel['hatred'] + 0.3)

        elif event == 'KILLED_ME':
            rel['hatred'] = min(1.0, rel['hatred'] + 0.5)

    def should_cooperate(self, other_id):
        if other_id not in self.relationships:
            return self.genes['cooperation'] > 0.5

        rel = self.relationships[other_id]

        # 曾经的背叛会导致拒绝组队
        if rel['hatred'] > 0.7:
            return False

        return rel['trust'] > 0.4
```

---

## 十二、种族纯度系统

### 12.1 纯度计算

| 纯度等级 | DNA比例 | 效果 |
|---------|--------|------|
| 纯血 | ≥80%同种族 | 种族天赋+20% |
| 主血 | 60-79% | 种族天赋+10% |
| 混血 | 40-59% | 无额外效果 |
| 混沌 | <40% | 种族天赋-10%，奇迹率+5% |

### 12.2 玩法倾向

```
纯血流：
├─ 目标：凑齐6件同种族DNA
├─ 优势：种族天赋最大化
└─ 劣势：单一，容易被克制

混沌流：
├─ 目标：4件不同种族，触发奇迹
├─ 优势：可能获得独特能力
└─ 劣势：属性惩罚，不稳定
```

---

## 十三、基因隐性突变

### 13.1 隐性词条机制

```python
class HiddenGeneSystem:
    """
    DNA有隐性词条（装备后鉴定才可见）
    """
    def generate_hidden_trait(self, dna):
        # 30%概率有隐性词条
        if random.random() < 0.3:
            trait_pool = [
                {'name': '恐高', 'effect': {'high_altitude_accuracy': -0.30}},
                {'name': '嗜血', 'effect': {'low_hp_attack': +0.20}},
                {'name': '夜盲', 'effect': {'night_vision': -0.50}},
                {'name': '狂暴基因', 'effect': {'berserk_threshold': 0.20}},
                {'name': '再生', 'effect': {'regen': +0.01}},
            ]
            dna.hidden_trait = random.choice(trait_pool)
            dna.trait_revealed = False

    def reveal_trait(self, dna):
        if not dna.trait_revealed:
            dna.trait_revealed = True
            notify(f"发现隐性基因：{dna.hidden_trait['name']}")

    def cleanse_trait(self, dna):
        # 使用"基因清洗剂"洗掉负面词条
        if dna.hidden_trait and is_negative(dna.hidden_trait):
            dna.hidden_trait = None
            return True
        return False
```

---

## 十四、多角色槽系统

### 14.1 角色槽获取

| 槽位 | 获取方式 | 成本 | 说明 |
|------|---------|------|------|
| 槽位1 | 免费 | 0 | 主角色，永久绑定 |
| 槽位2 | 新手任务 | 0（白嫖） | 主角色Lv10解锁 |
| 槽位3 | 氪金 | 500钻 | 永久解锁 |
| 槽位4 | 氪金 | 800钻 | 永久解锁 |
| 槽位5 | 赛季通行证 | 白嫖（肝） | 满级奖励 |
| 槽位6-10 | 氪金 | 1000钻/个 | VIP专属 |

### 14.2 槽类型

```
【类型A：原始培养槽】（从零开始）
- 创建时选择初始形态（人形/异形/兽型）
- 自己刷副本收集DNA慢慢改造
- 情感羁绊最深

【类型B：完整DNA注入槽】（商城抽取）
- 如果抽到"完整美杜莎DNA组"
- 可以直接注入空槽，瞬间拥有美杜莎形态
- 省去慢慢拼凑的过程

【类型C：克隆槽】（复制已有角色）
- 花费1000钻，克隆你的某个角色
- 基因、装备、等级全部复制
- 用于"保险"或"实验分支"
```

### 14.3 DNA共享机制

```
DNA仓库系统：
┌────────────────────────────────────────┐
│         【DNA仓库】（共享）             │
│                                        │
│ 美杜莎头颅DNA ×3（未绑定）             │
│ 吸血鬼翅膀DNA ×5（未绑定）             │
│ 狼人利爪DNA ×2（未绑定）               │
│ 贞子头颅DNA ×1（已绑定：槽位1）🔒     │
└────────────────────────────────────────┘

使用规则：
1. 未绑定DNA可以给任意角色使用
2. 使用后该DNA"绑定"到该角色，无法转移
3. 如果角色退役/重置，DNA返回仓库（变回未绑定）
```

---

## 十五、家园收藏陈列系统

### 15.1 家园布局

```
┌──────────────────────────────────────────────────┐
│                 【我的家园】                      │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │            出战角色区                       │ │
│  │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐      │ │
│  │  │槽位1 │ │槽位2 │ │槽位3 │ │槽位4 │ ...  │ │
│  │  │人形  │ │异形  │ │美杜莎│ │空位  │      │ │
│  │  └──────┘ └──────┘ └──────┘ └──────┘      │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │            收藏陈列区                       │ │
│  │  （只展示，不能出战，纯观赏）               │ │
│  │                                            │ │
│  │  🏆 完整形态收集（拼图式）                 │ │
│  │  ┌─────────────────────────────────────┐  │ │
│  │  │ 美杜莎（完整度100%）✅               │  │ │
│  │  │ ├─ 头：美杜莎头颅 ✅                 │  │ │
│  │  │ ├─ 躯干：人形躯干 ✅                 │  │ │
│  │  │ ├─ 四肢：人手人脚 ✅                 │  │ │
│  │  │ └─ 特殊：蛇发 ✅                     │  │ │
│  │  └─────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │            Boss展示厅                       │ │
│  │  （封神系统收录的传奇Boss）                 │ │
│  └────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────┘
```

### 15.2 收藏陈列作用

| 功能 | 说明 | 奖励 |
|------|------|------|
| 完整度奖励 | 收集完整美杜莎 | 家园装饰 + 称号"蛇发女王" |
| 图鉴完成度 | 收集10个完整形态 | 全属性+5%（永久） |
| 稀有展示 | 展示封神冠军Boss | 可让好友"借用"1次 |
| 社交炫耀 | 好友参观点赞 | 点赞≥100获"收藏家"称号 |

---

## 十六、未知形态奇迹机制

### 16.1 奇迹触发

| 混搭程度 | 协调度 | 惩罚 | 奇迹触发率 |
|---------|--------|------|-----------|
| 同形态套装 | 100% | 无 | 0% |
| 轻度混搭（3+1） | 85% | -10% | 1% |
| 重度混搭（2+2） | 70% | -20% | 5% |
| **极限混搭（4件全不同）** | **50%** | **-30%** | **15%** |

### 16.2 奇迹效果池

```
奇迹效果（随机抽取）：
├─ 【禁忌进化】：所有部位同时升1级
├─ 【混沌祝福】：随机获得一个神话部位
├─ 【适应突变】：协调度惩罚消失30天
├─ 【深渊契约】：全属性+50%，但每天-10HP上限
├─ 【未知觉醒】：解锁"形态切换"技能
└─ 【混沌之子】：成为"第五形态"，全服唯一
```

---

## 十七、AI视角双模式

### 17.1 视角切换

```
【默认：游戏视角】
- 彩色、上帝视角、清晰
- 玩家能看到全局
- 用于宏观决策

【可切换：AI视角】
┌─────────────────────────────────────┐
│ 人形AI视角：                        │
│ - 前方120°彩色高清                  │
│ - 背后黑色迷雾（战争迷雾）          │
│ - 听到背后动静有红色波纹提示        │
│                                     │
│ 异形AI视角：                        │
│ - 黑白声纳线条图                    │
│ - 移动物体有波纹                    │
│ - 静止目标只有轮廓                  │
│                                     │
│ 兽型AI视角：                        │
│ - 正常彩色视野                      │
│ - 叠加半透明红色"气味云"            │
│ - 受伤单位留下红色轨迹              │
└─────────────────────────────────────┘
```

**用途**：
- ✅ 理解"为什么AI突然转身"
- ✅ 理解"为什么异形绕路"
- ✅ 理解"为什么兽型追踪"

---

## 十八、L0/L1/L2三层记忆系统

### 18.1 三层架构

| 层级 | 名称 | 存储内容 | 持久性 | 影响 |
|------|------|---------|--------|------|
| L0 | 直觉场 | 危险区域、死亡气息 | 场记忆（全局） | 恐惧/预感 |
| L1 | 战斗记忆 | 交互历史、仇恨/信任 | 个体记忆 | 社交决策 |
| L2 | 基因改变 | 永久性格变化 | 永久写入DNA | 行为倾向 |

### 18.2 L0直觉场

```python
def assess_danger_field(pos):
    """读取脚下的死亡气息"""
    danger = (
        w1 * death_density[pos] +      # 近期死亡密度
        w2 * predator_presence[pos] +  # 强者出现频率
        w3 * corpse_smell[pos]         # 尸体腐败场
    )
    fear_level = sigmoid(danger * self.genome['sensitivity'])

    if fear_level > 0.7:
        return ACTION_HESITATE_OR_FLEE
```

### 18.3 L1→L2性格塑形

```python
def evolve_psychology(episode_stats):
    """经历重塑性格"""
    alpha = 0.05  # 学习率

    # 如果这回合被偷了多次
    if episode_stats['theft_received'] > 3:
        self.genome[:, GENE_ALTRUISM] *= (1.0 - alpha)
        self.genome[:, GENE_AGGRESSION] *= (1.0 + alpha)

    # 如果频繁成功反杀
    if episode_stats['counter_kill'] > 2:
        self.genome[:, GENE_REVENGE] *= (1.0 + alpha)
```

---

## 十九、DNA品质系统

### 19.1 品质等级

| 品质 | 来源 | 副作用 | 特殊属性 |
|------|------|--------|---------|
| **完美** | 首杀Boss/PVP高手 | 无 | 可能带天赋 |
| **优质** | 正常Boss掉落 | 5%概率-1属性 | 无 |
| **劣质** | 普通怪掉落 | 20%概率-2属性 | 无 |
| **污染** | 辐射区/失败实验 | 50%基因崩溃 | 可能出奇迹 |

### 19.2 融合公式

```python
def fuse_dna(original, new_dna, quality):
    result = (1 - λ) * original + λ * new_dna

    if quality == "完美":
        return result
    elif quality == "优质":
        if random() < 0.05:
            result[random_attr] -= 1
    elif quality == "劣质":
        if random() < 0.20:
            result[random_attr] -= 2
    elif quality == "污染":
        if random() < 0.50:
            return GENETIC_COLLAPSE
        else:
            result[random_attr] += 20  # 奇迹

    return result
```

---

## 二十、PVP DNA性格/天赋词条

### 20.1 性格属性

```
击杀玩家AI后掉落的DNA可能携带：

【性格属性】
├─ 勇气+10：遇到强敌不易逃跑
├─ 谨慎+10：血量<50%自动撤退
├─ 贪婪+10：优先拾取掉落
├─ 利他+10：更愿意救队友
└─ 复仇+10：被偷袭后必定追杀

【天赋属性】
├─ 雷电术熟练度+15%
├─ 剑术精通+10%
├─ 潜行大师+20%
├─ 生存本能+10%
└─ 领袖光环+5%
```

### 20.2 融合规则

| 融合对象 | 结果 |
|---------|------|
| 同属性叠加 | 累加（有上限50） |
| 冲突属性 | 相互抵消 |
| 天赋叠加 | 累加但效率递减 |

---

## 二十一、突变路线图

### 21.1 人形突变路线

```
【天使化】
Torso突变 → 解锁Wing槽 → 飞行能力
代价：骨密度↓（防御-10%）+ 能量+20%

【恶魔化】
Torso突变 → 解锁Tail槽 → 鞭击攻击
代价：体型↑（闪避-10%）

【龙人化】
Head突变 → 解锁Horn槽 → 撞击攻击
代价：无法装备头盔
```

### 21.2 异形突变路线

```
【纯异形强化】
强化Tail → 刺尾/毒尾/钢鞭尾
结果：极致捕食者，无法用武器

【人形化】
Tail退化 → 解锁Arm×2
代价：失去平衡 + 失去尾巴攻击
获得：可用双手武器
```

### 21.3 兽型突变路线

```
【人手化】
Paw → Arm
代价：失去爪击 + 失去攀爬
获得：可装备武器

【飞行化】
解锁Wing
代价：牺牲部分手部或尾巴

【坦克化】
Leg强化 → 跳跃/冲刺/承载
适合重甲流
```

---

## 二十二、商城与氪金系统

### 22.1 DNA扭蛋机

```
┌────────────────────────────────────────┐
│         【DNA扭蛋机】                   │
│                                        │
│ 单抽：100钻/次                         │
│ 十连：900钻（保底1个稀有）             │
│                                        │
│ 奖池内容：                             │
│ ├─ 70%：普通DNA碎片                    │
│ ├─ 25%：稀有DNA碎片（带天赋）          │
│ ├─ 4%：完整DNA组                       │
│ └─ 1%：神话DNA组                       │
└────────────────────────────────────────┘
```

### 22.2 氪金点设计

| 项目 | 价格 | 获得 | 白嫖替代 |
|------|------|------|---------|
| Boss挑战卷 | 50钻/张 | 指定Boss战1次 | 每日1张 |
| DNA扭蛋 | 100钻/次 | 随机DNA | 无 |
| 媒介礼包 | 200钻 | 10个媒介 | 副本宝箱 |
| 角色槽 | 500-1000钻 | 永久解锁 | 赛季奖励 |
| 基因重置 | 500钻 | 重置1个部位 | Top50奖励 |
| 神经适配器 | 300钻 | 负载-50% | Boss首杀 |

### 22.3 白嫖路线

```
3个月白嫖可获得：
├─ 每日任务：90张挑战卷
├─ 周常任务：36张挑战卷
├─ 副本掉落：约50个媒介
├─ PVP奖励：3个基因重置（钻石段位）
└─ 赛季通行证：1套完整神话DNA

结论：可以白嫖凑齐完美build，只是比氪金慢2-3个月
```

---

## 二十三、PVP系统

### 23.1 入侵PVP（日常）

```
触发条件：副本探索时随机触发
         │
         ▼
双方AI自主决策：
├─ 合作打怪？
├─ 无视对方？
├─ 主动攻击？
└─ 背刺？

结果：
├─ 合作成功 → 双方获得经验 + DNA碎片
├─ 击杀对方 → 获得DNA/装备
└─ 被击杀 → 丢失部分材料
```

### 23.2 封神之战（大逃杀）

```
参与条件：角色达到成长度要求
周期：每赛季末
人数：64/128/256人同场

规则：
1. 所有AI传送到大型地图
2. 地图逐渐缩小（毒圈）
3. AI自主决策：躲藏/狩猎/组队/背叛
4. 最后1个AI获得【真神】称号
5. DNA被收录进Boss库

奖励：
├─ 冠军：封神 + DNA收录 + 专属外观
├─ Top10：稀有DNA碎片
└─ 参与：基础奖励
```

---

## 二十四、游戏流程总览

```
┌─────────────────────────────────────────────────────┐
│                 【世界地图 - DNF式】                  │
│                                                     │
│   ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐              │
│   │林中  │  │废弃  │  │地下  │  │冰封  │  ...       │
│   │小屋  │  │矿井  │  │墓穴  │  │峡谷  │              │
│   └──┬──┘  └──┬──┘  └──┬──┘  └──┬──┘              │
│      │        │        │        │                  │
│      ▼        ▼        ▼        ▼                  │
│   独立副本  独立副本  独立副本  独立副本              │
│   (鬼怪A)  (鬼怪B)  (鬼怪C)  (鬼怪D)              │
└─────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────┐
│                 【副本内 - 暗黑2风格】                │
│                                                     │
│   • 你的AI进入副本自动探索战斗                       │
│   • 击杀怪物掉落：装备 / DNA碎片 / 材料 / 媒介       │
│   • 随机触发【入侵系统】- 其他玩家AI入侵             │
│   • AI自己决定：协同合作 or 杀人越货                 │
└─────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────┐
│                 【大逃杀PK - 封神之战】               │
│                                                     │
│   • 定期举办，多人AI同时进入                         │
│   • 大逃杀模式，最后存活者封神                       │
│   • 封神者的DNA被收录进Boss库                       │
│   • 下赛季作为新的副本Boss出现                       │
└─────────────────────────────────────────────────────┘
```

---

## 二十五、玩家操控边界

### 25.1 玩家能做的（宏观）

| 操作 | 说明 |
|------|------|
| 选择角色 | 从多个角色槽中选择出战 |
| 选择副本 | 决定去哪个地图 |
| 配置装备 | 决定穿什么、拿什么 |
| 配置技能 | 决定技能槽放什么 |
| DNA融合 | 决定用什么DNA改造 |
| 收录管理 | 管理鬼怪宠物 |
| 观战 | 看AI战斗 |
| 切换AI视角 | 理解AI决策 |

### 25.2 玩家不能做的（微观）

| 禁止操作 | 说明 |
|----------|------|
| 操控移动 | AI自己决定走位 |
| 释放技能 | AI自己决定什么时候放 |
| 选择目标 | AI自己决定打谁 |
| 决定撤退 | AI自己决定逃跑还是硬刚 |
| 查看数值 | 看不到具体攻击力/血量 |
| 删除角色 | 不允许重开 |

---

## 二十六、技术架构

### 26.1 系统架构

```
┌─────────────────────────────────────────────────────┐
│                 【系统架构】                         │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │           玩家配置层（传统DB）                │   │
│  │  • 装备表、技能表、DNA表                     │   │
│  │  • 玩家存档、收录图鉴                        │   │
│  │  • 副本配置、怪物配置                        │   │
│  └─────────────────────┬───────────────────────┘   │
│                        │ 读取配置                   │
│                        ▼                            │
│  ┌─────────────────────────────────────────────┐   │
│  │           Ordis AI层（GPU张量）              │   │
│  │  • AI决策引擎（基因+记忆→行为）              │   │
│  │  • 战斗模拟（技能执行、伤害计算）            │   │
│  │  • 社交系统（合作/背叛决策）                 │   │
│  │  • DNA融合效果计算                           │   │
│  └─────────────────────┬───────────────────────┘   │
│                        │ 输出结果                   │
│                        ▼                            │
│  ┌─────────────────────────────────────────────┐   │
│  │           表现层（客户端）                    │   │
│  │  • 战斗动画、特效                            │   │
│  │  • AI行为可视化                              │   │
│  │  • 不显示具体数值，只显示状态                │   │
│  └─────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
```

### 26.2 AI决策流程

```python
def ai_decision_frame(ai_entity, environment):
    # 1. 感知环境
    visible_enemies = get_visible_enemies(ai_entity, environment)
    visible_allies = get_visible_allies(ai_entity, environment)
    own_state = get_own_state(ai_entity)

    # 2. 基因影响基础倾向
    aggression = ai_entity.genome['aggression']
    cooperation = ai_entity.genome['cooperation']
    survival = ai_entity.genome['survival']

    # 3. 记忆影响决策
    memory_modifier = get_memory_modifier(ai_entity, visible_entities)

    # 4. 形态影响决策
    form_modifier = get_form_modifier(ai_entity)

    # 5. 计算各行为效用
    utilities = calculate_utilities(...)

    # 6. Softmax选择行为
    action = softmax_select(utilities, temperature=ai_entity.genome['tau'])

    return action
```

---

## 二十七、突变取舍设计

### 27.1 突变代价表

**核心设计**：每个突变都有获得和失去，没有无脑强化

| 突变类型 | 获得能力 | 失去能力 | 玩家权衡 |
|---------|---------|---------|----------|
| **人形长翅膀** | +飞行，+2装备槽 | -移速（翅膀重） | 机动性 vs 装备强度 |
| **人形长尾巴** | +平衡，+鞭击攻击 | -闪避（体型变大） | 攻击范围 vs 灵活性 |
| **异形去尾巴** | +直立，+双手武器 | -毒攻击，-平衡 | 武器伤害 vs 特殊技能 |
| **兽型人手化** | +装备武器/盾牌 | -爪击伤害，-攀爬 | 装备系统 vs 原始能力 |
| **头部长角** | +撞击，+威慑 | -头盔槽位 | 天生武器 vs 装备防御 |
| **长出复眼** | +视野180° | -视距-3格 | 广角 vs 远视 |
| **强化声纳** | +声纳范围+5格 | -失去视觉 | 全向感知 vs 远程识别 |
| **长出翅膀（兽型）** | +飞行能力 | -部分手部功能 | 机动 vs 操作 |

### 27.2 盲区利用玩法（AI涌现行为）

**种族感知差异会导致AI自动学习战术**：

```
人形AI涌现行为：
├─ "贴墙走"（减少背后盲区暴露）
├─ "背靠角落"（只需防守前方）
├─ "频繁转身"（被偷袭多次后学会）
└─ "找掩体喝药"（利用视野安全区）

异形AI涌现行为：
├─ "走背后"（利用人形120°盲区）
├─ "静止埋伏"（声纳探测不到静止目标）
├─ "追着打"（360°无盲区优势）
└─ "速战速决"（无法回血所以激进）

兽型AI涌现行为：
├─ "闻到血就追"（嗅觉追踪受伤目标）
├─ "警戒模式"（闻到气味时停下来转圈扫描）
├─ "守尸"（确保能吃到尸体回血）
└─ "避开臭气弹区域"（嗅觉被干扰的地方）
```

---

## 二十八、赛季主题扩展（世界观）

### 28.1 赛季1：欧洲黑暗童话

| 副本 | Boss | 特色DNA | 媒介 | 难度 |
|------|------|---------|------|------|
| **林中小屋** | 鬼婆/树妖/影子 | 鬼婆头颅（诅咒+10） | 腐烂日记 | ★★☆ |
| **吸血鬼城堡** | 德古拉 | 吸血鬼翅膀（吸血15%） | 血族徽章 | ★★★ |
| **狼人森林** | 狼人首领 | 狼人利爪（撕裂+20%） | 狼嚎月石 | ★★★ |
| **女巫集会** | 三女巫 | 女巫手臂（诅咒范围+3） | 女巫的眼泪 | ★★★★ |

**赛季特色**：
- 夜晚副本伤害+20%
- 银武器对狼人额外伤害
- 吸血鬼怕阳光（白天副本弱化）

### 28.2 赛季2：东方妖怪录

| 副本 | Boss | 特色DNA | 媒介 | 难度 |
|------|------|---------|------|------|
| **九尾狐洞窟** | 九尾狐 | 九尾×9（每条+10%魔力） | 狐火玉 | ★★★★ |
| **百鬼夜行街** | 百鬼首领 | 百鬼躯干（召唤小鬼） | 夜行灯笼 | ★★★ |
| **河童水域** | 河童王 | 河童甲壳（水下呼吸） | 黄瓜供品 | ★★☆ |
| **天狗山** | 大天狗 | 天狗翅膀（风属性+25%） | 天狗面具 | ★★★★ |

**赛季特色**：
- 九尾狐尾巴可以单独收集（1-9条）
- 百鬼夜行随机刷新稀有小鬼
- 河童弱点是头顶的盘子

### 28.3 赛季3：克苏鲁深渊

| 副本 | Boss | 特色DNA | 媒介 | 难度 |
|------|------|---------|------|------|
| **R'lyeh废墟** | 克苏鲁 | 触手×N（多目标攻击） | 疯狂石板 | ★★★★★ |
| **深潜者海域** | 深潜者首领 | 深渊之眼（精神攻击） | 深海珍珠 | ★★★★ |
| **旧日支配者圣殿** | 奈亚拉托提普 | 不定形躯干（变形） | 黑色印记 | ★★★★★ |
| **疯狂图书馆** | 知识守护者 | 第三只眼（禁忌知识） | 破损古籍 | ★★★ |

**赛季特色**：
- SAN值系统（精神污染）
- 看到Boss可能导致AI暂时疯狂
- 禁忌知识DNA有隐藏负面效果
- 克苏鲁触手数量随机（3-12条）

### 28.4 赛季Boss DNA收集进度

```
┌─────────────────────────────────────────────────────────┐
│                【赛季Boss收集图鉴】                      │
│                                                         │
│  赛季1：欧洲黑暗童话                                     │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐                  │
│  │德古拉│ │狼人王│ │三女巫│ │鬼婆  │                  │
│  │ ✅   │ │ ✅   │ │ ⏳   │ │ ✅   │                  │
│  │4/4件 │ │4/4件 │ │2/4件 │ │4/4件 │                  │
│  └──────┘ └──────┘ └──────┘ └──────┘                  │
│                                                         │
│  赛季2：东方妖怪录                                       │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐                  │
│  │九尾狐│ │百鬼首│ │河童王│ │大天狗│                  │
│  │ ⏳   │ │ ❌   │ │ ✅   │ │ ⏳   │                  │
│  │7/9尾 │ │0/4件 │ │4/4件 │ │2/4件 │                  │
│  └──────┘ └──────┘ └──────┘ └──────┘                  │
│                                                         │
│  赛季3：克苏鲁深渊                                       │
│  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐                  │
│  │克苏鲁│ │深潜者│ │奈亚  │ │知识者│                  │
│  │ ❌   │ │ ❌   │ │ ❌   │ │ ⏳   │                  │
│  │0/12触│ │0/4件 │ │0/4件 │ │1/4件 │                  │
│  └──────┘ └──────┘ └──────┘ └──────┘                  │
└─────────────────────────────────────────────────────────┘
```

---

## 二十九、三大AI建议对比表

### 29.1 核心建议对比

| 维度 | Gemini建议 | Claude建议 | GPT建议 |
|------|-----------|-----------|---------|
| **核心观点** | "V3.5的完美商业化肉身" | 技术映射表+性格可视化 | "别只写文档，做MVP" |
| **最强建议1** | 创伤系统(PTSD) | 性格养成(L1→L2) | 性格被世界塑造(EMA写回) |
| **最强建议2** | 遗产系统(血脉相承) | 直觉系统(L0 Field) | L0恐惧感(场记忆) |
| **最强建议3** | 预感系统(危险直觉) | 血脉压制(数学基础) | 血脉压制(历史数据) |
| **技术实现** | Week 1-2分阶段 | ECS/GPU Controller改造 | 4个具体任务(最细化) |
| **风险提醒** | AI质量决定成败 | 避免玩家看到"脚本感" | 文档高潮≠实际产品 |

### 29.2 三大AI共同强调的核心点

#### 1. 性格是养出来的，不是骰出来的

```python
# L1战斗记忆 → L2基因永久改变
def evolve_psychology(episode_stats):
    alpha = 0.05  # 学习率

    if episode_stats['theft_received'] > 3:
        # 被偷多次 → 变得不信任
        self.genome[:, GENE_ALTRUISM] *= (1.0 - alpha)
        self.genome[:, GENE_AGGRESSION] *= (1.0 + alpha)

    if episode_stats['counter_kill'] > 2:
        # 反杀成功 → 强化报复倾向
        self.genome[:, GENE_REVENGE] *= (1.0 + alpha)
```

**玩家体验**："我的孩子本来善良，是被这个残酷的世界逼成恶魔的"

#### 2. L0场记忆作为"直觉"

```python
def assess_danger_field(pos):
    """读取脚下的死亡气息"""
    danger = (
        w1 * death_density[pos] +      # 近期死亡密度
        w2 * predator_presence[pos] +  # 强者出现频率
        w3 * corpse_smell[pos]         # 尸体腐败场
    )
    fear_level = sigmoid(danger * self.genome['sensitivity'])

    if fear_level > 0.7:
        return ACTION_HESITATE_OR_FLEE  # 说不出理由的不祥预感
```

**玩家体验**："AI走到路口突然停住，瑟瑟发抖，死活不肯进去——结果里面真蹲着Boss！"

#### 3. 血脉压制是算出来的

```python
def assess_threat(enemy):
    """战前预演，基于历史数据"""
    win_rate_pred = query_server_stats(
        my_race=self.race,
        enemy_race=enemy.race,
        environment=current_map
    )

    if win_rate_pred < 0.1:
        return ACTION_BEG_FOR_MERCY  # 下跪求饶
    elif win_rate_pred < 0.4:
        return ACTION_FLEE  # 逃跑
    else:
        return ACTION_FIGHT
```

**玩家体验**："同样是人形小兵，见到普通怪就上，见到那个高等异形会直接跪——这不是脚本，是服务器'死亡经验'的回声"

---

## 三十、MVP开发计划

### 30.1 Phase 0: 核心验证（2-3周）

```
目标：验证AI自主战斗可行性

内容：
├── 1个玩家AI（Ordis驱动）
├── 1个简单副本（100×100格子）
├── 3个基础技能
├── 5个装备选项
├── 1种怪物（脚本AI）
└── 基础战斗循环

验证点：
• AI能否根据配装做出不同决策
• AI能否展现不同"性格"
• 战斗是否有观赏性
• 通过"宠物测试"（看它死了会心疼）
```

### 30.2 Phase 1: 核心玩法（1-2月）

```
内容：
├── DNA融合系统（6个部位）
├── 3种形态（人形/异形/兽型）
├── 3个副本（林中小屋/吸血鬼城堡/狼人森林）
├── 入侵系统（基础版）
├── 收录系统（图鉴）
├── 多角色槽（2个槽位）
├── 不公开数值的UI设计
└── L1记忆系统
```

### 30.3 Phase 2: PVP系统（1月）

```
内容：
├── 入侵系统完善
├── PVP DNA特殊属性（性格/天赋）
├── 大逃杀模式（封神之战）
├── 封神系统
├── 排行榜
├── 社交功能
└── L0场记忆系统
```

### 30.4 Phase 3: 内容扩展（持续）

```
内容：
├── 更多副本/怪物（赛季主题）
├── 更多DNA类型
├── 更多形态（未知形态奇迹）
├── 赛季系统
├── 家园装饰
├── 商城优化
└── 运营活动
```

### 30.5 "宠物测试"验收标准

```
把AI扔进100×100格子里，观察30分钟：

【通过标准】
✅ 你能给它起名字（比如"小白"）
✅ 你能预测它的性格（"小白比较怂"）
✅ 它死了你会心疼（"小白别死啊！"）
✅ 你想重新开一局养第二个（"这次养个勇敢的"）

【失败标准】
❌ 看起来像随机乱跑
❌ 你觉得"这就是个脚本"
❌ 它死了你无感
❌ 你觉得"换个种子重开都一样"
```

---

## 三十一、部位专精系统

### 31.1 系统概述

每个部位槽都有独立的专精等级树（Lv1→Lv4），通过特定条件解锁更高级别形态，最终可获得**神话级部件**。

**核心设计**：
- 每个部位独立升级，不互相影响
- Lv4神话部件有**10%概率**触发
- **100次保底**：同一部位升级失败100次后必出神话
- 神话部件按种族分类，提供独特视觉和能力

### 31.2 通用专精路径

```
【头部专精】
├─ Lv1: 基础头颅
├─ Lv2: 强化感知（击杀50个同类怪）
├─ Lv3: 突变器官（角/复眼/触角）
└─ Lv4: 神话头颅 ⭐
    ├─ 人形: 天使光环头 / 恶魔角冠
    ├─ 异形: 美杜莎蛇发 / 虚空裂颅
    └─ 兽型: 龙头 / 九尾狐首

【躯干专精】
├─ Lv1: 基础躯干
├─ Lv2: 强化躯干（承受5000点伤害）
├─ Lv3: 突变躯体（甲壳/鳞片/骨刺）
└─ Lv4: 神话躯干 ⭐
    ├─ 人形: 圣光之躯 / 暗影之心
    ├─ 异形: 虫巢核心 / 酸血之源
    └─ 兽型: 龙鳞铠甲 / 凤凰羽躯

【左臂专精】
├─ Lv1: 基础左臂
├─ Lv2: 力量强化（造成10000点伤害）
├─ Lv3: 突变臂（镰刀臂/触手/岩臂）
└─ Lv4: 神话左臂 ⭐
    ├─ 人形: 泰坦之拳 / 时间之手
    ├─ 异形: 寄生触须 / 毁灭螳臂
    └─ 兽型: 巨龙前爪 / 雷狼之臂

【右臂专精】
├─ Lv1: 基础右臂
├─ Lv2: 精准强化（命中率+20%后）
├─ Lv3: 突变臂（利爪/毒刺/骨剑）
└─ Lv4: 神话右臂 ⭐
    ├─ 人形: 审判之手 / 治愈之握
    ├─ 异形: 异次元触手 / 剧毒注射器
    └─ 兽型: 猎豹利爪 / 熊掌之力

【左腿专精】
├─ Lv1: 基础左腿
├─ Lv2: 速度强化（移动10000格）
├─ Lv3: 突变腿（蹄足/吸盘足/弹簧腿）
└─ Lv4: 神话左腿 ⭐
    ├─ 人形: 疾风之履 / 大地之足
    ├─ 异形: 虫族跳跃器 / 蛛丝发射腿
    └─ 兽型: 猎豹后腿 / 龙尾蹬地

【右腿专精】
├─ Lv1: 基础右腿
├─ Lv2: 耐力强化（连续战斗100场）
├─ Lv3: 突变腿（节肢/蹼足/根须腿）
└─ Lv4: 神话右腿 ⭐
    ├─ 人形: 天马之蹄 / 冥府之足
    ├─ 异形: 多节虫足 / 寄生根须
    └─ 兽型: 麒麟之蹄 / 九头蛇尾腿

【左翼专精】（兽型/未知可用，人形默认锁定）
├─ Lv1: 基础翼
├─ Lv2: 飞行强化（飞行1000格）
├─ Lv3: 突变翼（蝙蝠翼/昆虫翼/能量翼）
└─ Lv4: 神话左翼 ⭐
    ├─ 异形: 虚空之翼 / 毒蛾翅膀
    └─ 兽型: 天使羽翼 / 龙之双翼

【右翼专精】
├─ Lv1: 基础翼
├─ Lv2: 机动强化（空中击杀50只）
├─ Lv3: 突变翼（骨翼/光翼/甲壳翼）
└─ Lv4: 神话右翼 ⭐
    ├─ 异形: 深渊蝠翼 / 寄生滑翔膜
    └─ 兽型: 凤凰之翼 / 恶魔蝙蝠翼

【尾巴专精】（兽型/异形可用，人形默认锁定）
├─ Lv1: 基础尾
├─ Lv2: 攻击强化（尾击命中500次）
├─ Lv3: 突变尾（毒尾/刺尾/鞭尾）
└─ Lv4: 神话尾巴 ⭐
    ├─ 异形: 抱脸虫产卵管 / 剧毒蝎尾
    └─ 兽型: 九尾 / 龙尾

【角/触角专精】
├─ Lv1: 基础角/触角
├─ Lv2: 感知强化（探测500个敌人）
├─ Lv3: 突变角（鹿角/犀牛角/触须）
└─ Lv4: 神话角 ⭐
    ├─ 人形: 恶魔之角 / 独角兽角
    ├─ 异形: 感应触角矩阵 / 精神控制角
    └─ 兽型: 麒麟之角 / 地狱火角

【特殊槽专精】
├─ Lv1: 基础特殊器官
├─ Lv2: 功能强化（使用特殊能力100次）
├─ Lv3: 突变器官（发光器/毒囊/共生体）
└─ Lv4: 神话特殊器官 ⭐
    ├─ 人形: 圣心核 / 暗影之核
    ├─ 异形: 虫族皇后核心 / 酸血反应堆
    └─ 兽型: 龙之逆鳞 / 凤凰涅槃核
```

### 31.3 神话部件获取机制

```python
class MythicPartSystem:
    """
    神话部件获取系统
    - 10%基础概率
    - 100次保底机制
    """

    def __init__(self):
        self.pity_counter = {}  # 每个部位独立保底计数
        self.mythic_rate = 0.10  # 10%基础概率
        self.pity_threshold = 100  # 100次保底

    def attempt_mythic_upgrade(self, ai, part_slot):
        """
        尝试升级到神话部件
        条件：Lv3 + 完美DNA品质
        """
        part = ai.get_part(part_slot)

        # 检查前置条件
        if part.level < 3:
            return {"success": False, "reason": "需要Lv3部件"}
        if part.dna_quality != "完美":
            return {"success": False, "reason": "需要完美DNA品质"}

        # 初始化保底计数
        if part_slot not in self.pity_counter:
            self.pity_counter[part_slot] = 0

        # 保底检查
        self.pity_counter[part_slot] += 1
        if self.pity_counter[part_slot] >= self.pity_threshold:
            # 100次保底触发
            return self._grant_mythic(ai, part_slot, is_pity=True)

        # 概率检查
        import random
        if random.random() < self.mythic_rate:
            return self._grant_mythic(ai, part_slot, is_pity=False)
        else:
            return {
                "success": False,
                "reason": "升级失败",
                "pity_count": self.pity_counter[part_slot],
                "remaining": self.pity_threshold - self.pity_counter[part_slot]
            }

    def _grant_mythic(self, ai, part_slot, is_pity):
        """授予神话部件"""
        species = ai.get_dominant_species()
        mythic_options = self.get_mythic_options(part_slot, species)
        selected = random.choice(mythic_options)

        # 重置保底计数
        self.pity_counter[part_slot] = 0

        return {
            "success": True,
            "mythic_part": selected,
            "is_pity": is_pity,
            "message": f"🌟 获得神话部件：{selected}！" +
                      ("（保底触发）" if is_pity else "（幸运触发）")
        }

    def get_mythic_options(self, part_slot, species):
        """根据部位和种族返回可选神话部件"""
        mythic_table = {
            "头部": {
                "人形": ["天使光环头", "恶魔角冠"],
                "异形": ["美杜莎蛇发", "虚空裂颅"],
                "兽型": ["龙头", "九尾狐首"]
            },
            # ... 其他部位类似
        }
        return mythic_table.get(part_slot, {}).get(species, ["未知神话部件"])
```

### 31.4 专精系统与种族联动

| 种族 | 专精特点 | 神话部件风格 |
|------|---------|-------------|
| **人形** | 均衡发展，翅膀/尾巴需解锁 | 天使/恶魔/圣光/暗影主题 |
| **异形** | 快速突变，特殊器官强大 | 虫族/寄生/酸血/虚空主题 |
| **兽型** | 四肢/翅膀/尾巴全开 | 龙/凤凰/神兽主题 |
| **未知** | 随机继承各族特点 | 混沌/奇迹/融合主题 |

### 31.5 神话部件特殊效果（示例）

| 神话部件 | 种族 | 特殊效果 |
|---------|------|---------|
| 美杜莎蛇发 | 异形 | 对视敌人有5%概率石化1秒 |
| 龙头 | 兽型 | 解锁"龙息"技能，范围火焰攻击 |
| 天使光环头 | 人形 | 濒死时触发一次复活（每场1次） |
| 九尾 | 兽型 | 每条尾巴储存一次技能充能 |
| 虫族皇后核心 | 异形 | 产卵速度+50%，抱脸虫上限+2 |
| 龙之逆鳞 | 兽型 | 受到致命伤害时反射50%给攻击者 |

### 31.6 保底进度可视化

```
【玩家视角 - 部位专精面板】

头部: [████████░░] Lv3 → Lv4
      神话进度: 73/100 (保底还需27次)
      上次尝试: 失败

躯干: [██████████] Lv4 ⭐ 神话已获得
      当前: 圣光之躯

左臂: [██░░░░░░░░] Lv1 → Lv2
      升级条件: 造成10000点伤害 (当前: 2340/10000)
```

---

## 三十二、装备/DNA出处与契合度系统

### 32.1 三层名字机制

每件装备/DNA部件都携带**三层持有者信息**：

```
┌────────────────────────────────────────────────────┐
│           【龙鳞护甲】传奇品质                      │
├────────────────────────────────────────────────────┤
│  📜 初始者 (Origin): "屠龙者·张三"                 │
│     └─ 首次击杀副本Boss获得，永久刻印，不可删除    │
│                                                    │
│  👤 当前持有者: "李四的AI·小黑"                    │
│     └─ 契合度: 87% (可覆盖初始者显示)              │
│                                                    │
│  💀 前任持有者: "夺自：王五的AI·小白"              │
│     └─ PVP击杀抢夺，显示被抢者名字                 │
└────────────────────────────────────────────────────┘
```

**显示规则**：
| 契合度 | 显示效果 |
|--------|---------|
| < 50% | 显示"初始者"名字（你只是借用） |
| 50%-79% | 显示"初始者"+"当前持有者" |
| ≥ 80% | **可选择覆盖**为自己的名字 |
| 100% | 完全绑定，显示为"XX的专属" |

### 32.2 契合度计算公式

```python
class AffinitySystem:
    """装备/DNA契合度系统"""

    def calculate_affinity(self, ai, item):
        """
        契合度 = 基因匹配×30% + 战斗熟练度×30% + 胜率×20% + 性格匹配×20%
        """
        # 基因匹配：DNA部件与AI当前形态的匹配程度
        gene_match = self.calc_gene_match(ai.dna_profile, item.origin_species)

        # 战斗熟练度：使用该装备的战斗次数
        battle_proficiency = min(1.0, item.battles_used / 500)  # 500场满熟练

        # 胜率：穿戴该装备时的胜率
        win_rate = item.wins / max(1, item.battles_used)

        # 性格匹配：装备来源Boss与AI性格的契合
        personality_match = self.calc_personality_match(ai.personality, item.origin_boss)

        affinity = (
            gene_match * 0.30 +
            battle_proficiency * 0.30 +
            win_rate * 0.20 +
            personality_match * 0.20
        )
        return affinity

    def calc_gene_match(self, ai_dna, item_species):
        """
        同种族DNA: 基础80%
        跨种族DNA: 基础40%，有协同效果时+20%
        """
        if ai_dna.dominant_species == item_species:
            return 0.8 + random.uniform(0, 0.2)
        else:
            base = 0.4
            if self.has_synergy(ai_dna, item_species):
                base += 0.2
            return base + random.uniform(0, 0.1)
```

### 32.3 仇恨值系统

```python
class RevengeSystem:
    """
    被抢装备产生仇恨，影响AI行为
    """

    def on_pvp_kill(self, killer, victim, looted_items):
        for item in looted_items:
            # 仇恨值 = 装备稀有度×10 + 契合度×50
            hatred = item.rarity_score * 10 + item.affinity * 50

            # 传奇装备额外仇恨
            if item.rarity == "传奇":
                hatred *= 2

            # 记录仇恨
            victim.add_hatred(killer.owner_name, hatred)

            # 标记装备来源
            item.previous_owner = victim.owner_name
            item.looted_from = f"夺自：{victim.name}"

    def ai_encounter_enemy(self, ai, enemy):
        """
        遇到仇人时的AI行为修正
        """
        hatred = ai.get_hatred(enemy.owner_name)

        if hatred > 100:
            # 极度仇恨：不惜代价追杀
            ai.aggression += 0.5
            ai.retreat_threshold = 0.1  # 血量10%才撤退
            ai.target_priority = enemy  # 锁定目标
            return "REVENGE_MODE"
        elif hatred > 50:
            # 中等仇恨：优先攻击
            ai.target_priority = enemy
            return "HOSTILE"
        else:
            return "NORMAL"
```

### 32.4 刷名机制（洗掉"夺自XXX"）

**三种方法移除"夺自"标记**：

| 方法 | 条件 | 效果 |
|------|------|------|
| **时间洗白** | 持有该装备连续30天无争议 | 自动移除"夺自"标记 |
| **战功洗白** | 穿戴该装备击杀100个同级敌人 | 可选择移除"夺自" |
| **付费洗白** | 消耗"净化石"×3（商城道具） | 立即移除所有负面标记 |

```python
class NameCleansingSystem:
    def check_time_cleanse(self, item):
        """30天无争议自动洗白"""
        if item.looted_from and item.days_held >= 30:
            if not item.has_recent_dispute:
                item.looted_from = None
                return True
        return False

    def check_battle_cleanse(self, item, kills_with_item):
        """100击杀可选洗白"""
        if kills_with_item >= 100:
            return True  # 允许玩家选择是否移除
        return False
```

---

## 三十三、DNA快照系统

### 33.1 系统概述

DNA快照允许玩家**保存AI当前状态的副本**，用于实验性培养或备份。

### 33.2 完整限制清单

```python
class DNASnapshotSystem:
    """
    DNA快照系统 - 严格限制防止滥用
    """

    # === 创建限制 ===
    CREATION_COST = {
        "dna_fragments": 50,      # DNA碎片×50
        "gold": 5000,             # 金币×5000
        "rare_material": 1        # 稀有材料×1（Boss掉落）
    }

    COOLDOWN_HOURS = 72           # 每72小时只能创建1个
    MAX_SNAPSHOTS_PER_AI = 2      # 每个AI最多2个快照
    MAX_SNAPSHOTS_TOTAL = 5       # 账号总共最多5个快照

    # === 使用限制 ===
    SNAPSHOT_LIFESPAN = 50        # 每个快照只能出战50次
    EXP_PENALTY = 0.5             # 经验获取×0.5
    DROP_PENALTY = 0.8            # 掉落率×0.8
    PVP_BANNED = True             # 快照不能参与PVP
    BOSS_BANNED = True            # 快照不能挑战周Boss

    # === 继承限制 ===
    MEMORY_INHERITED = False      # 快照不继承原版记忆
    SOCIAL_INHERITED = False      # 快照不继承社交关系
    HATRED_INHERITED = False      # 快照不继承仇恨值

    def create_snapshot(self, ai, player):
        # 检查冷却
        if player.last_snapshot_time + timedelta(hours=72) > now():
            return {"error": f"冷却中，还需等待{remaining_hours}小时"}

        # 检查数量上限
        if len(player.snapshots) >= self.MAX_SNAPSHOTS_TOTAL:
            return {"error": "快照数量已达上限"}

        if ai.snapshot_count >= self.MAX_SNAPSHOTS_PER_AI:
            return {"error": "该AI的快照数量已达上限"}

        # 检查资源
        if not player.has_resources(self.CREATION_COST):
            return {"error": "资源不足"}

        # 创建快照
        snapshot = AISnapshot(
            source_ai=ai,
            dna_profile=ai.dna_profile.copy(),
            stats=ai.stats.copy(),
            skills=ai.skills.copy(),
            # 不复制记忆、社交、仇恨
            memory=None,
            social_network=None,
            hatred_list=None
        )
        snapshot.remaining_battles = self.SNAPSHOT_LIFESPAN

        return {"success": True, "snapshot": snapshot}
```

### 33.3 快照vs本体对比

| 属性 | 本体 | 快照 |
|------|------|------|
| 经验获取 | 100% | **50%** |
| 掉落率 | 100% | **80%** |
| PVP参与 | ✅ 可以 | ❌ 禁止 |
| Boss挑战 | ✅ 可以 | ❌ 禁止 |
| 出战次数 | 无限 | **50次** |
| 记忆系统 | ✅ 完整L0/L1/L2 | ❌ 无记忆 |
| 社交网络 | ✅ 完整 | ❌ 无社交 |
| 死亡后果 | 永久影响 | 无后果（用完即弃） |

### 33.4 设计目的

```
【为什么要有快照？】

1. 实验性培养
   └─ 想试试"全异形build"但怕毁了主号
   └─ 用快照试错，成功了再给本体换

2. 高风险副本试探
   └─ 新副本不知道难度，先派快照探路
   └─ 快照死了无所谓，摸清机制再上本体

3. 情感备份
   └─ "小白"要去打生死战了，先存个快照
   └─ 万一死了，至少还有个"影子"可以看

【为什么限制这么严？】

防止滥用：
❌ 无限复制强力AI刷资源
❌ 用快照当炮灰无脑推图
❌ PVP用快照试探对手套路
```

---

## 三十四、种族克制链

### 34.1 三角克制关系

```
┌─────────────────────────────────────────────────────────┐
│                    【种族克制链】                        │
│                                                         │
│                       人形                              │
│                      /    \                             │
│                    克制    被克制                        │
│                    /          \                         │
│                   ↓            ↑                        │
│                异形 ──克制──→ 兽型                      │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 人形 克制 异形：远程风筝，酸血溅射距离外        │   │
│  │ 异形 克制 兽型：酸血腐蚀尸体，无法食用回血      │   │
│  │ 兽型 克制 人形：嗅觉追踪+打断施法+近战压制      │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### 34.2 克制机制详解

```python
class SpeciesCounterSystem:
    """
    种族克制系统 - 石头剪刀布设计
    """

    # 克制关系表
    COUNTER_TABLE = {
        "人形": {"counters": "异形", "countered_by": "兽型"},
        "异形": {"counters": "兽型", "countered_by": "人形"},
        "兽型": {"counters": "人形", "countered_by": "异形"},
        "未知": {"counters": None, "countered_by": None}  # 未知不参与克制
    }

    # 克制效果
    COUNTER_BONUS = 0.15  # 克制方伤害+15%
    COUNTER_PENALTY = 0.15  # 被克制方伤害-15%

    def get_damage_modifier(self, attacker_species, defender_species):
        """计算克制带来的伤害修正"""
        relation = self.COUNTER_TABLE.get(attacker_species)

        if relation["counters"] == defender_species:
            return 1.0 + self.COUNTER_BONUS  # 克制：+15%伤害
        elif relation["countered_by"] == defender_species:
            return 1.0 - self.COUNTER_PENALTY  # 被克制：-15%伤害
        else:
            return 1.0  # 无克制关系
```

### 34.3 克制机制的战术表现

| 克制关系 | 战术表现 | AI行为影响 |
|---------|---------|-----------|
| **人形→异形** | 人形远程攻击，保持距离；异形酸血溅射够不到 | 人形AI自动风筝，异形AI倾向突进 |
| **异形→兽型** | 异形死后酸血腐蚀尸体，兽型无法食用回血 | 兽型AI避免击杀异形，或击杀后立即撤离 |
| **兽型→人形** | 兽型嗅觉追踪无视隐身，近战打断人形施法 | 兽型AI贴脸压制，人形AI尝试拉开距离 |

### 34.4 未知种族的特殊地位

```
【未知种族】不参与三角克制

优势：
✅ 不会被任何种族克制
✅ 面对任何对手都是公平战斗

劣势：
❌ 也无法克制任何种族
❌ 无法利用克制优势碾压

定位：
"未知"是真正的"中立"种族
适合追求纯技术流、不想依赖克制的玩家
```

---

## 三十五、进阶生态系统

### 35.1 电子幽灵 (The Glitch)

**定位**：稀有精英怪 / "未知"种族的特殊变异体

```python
class TheGlitch:
    """
    电子幽灵 - Meta层面的存在
    """
    species = "未知"
    rarity = "稀有精英"

    # 特殊能力
    abilities = {
        "数据删除": {
            "effect": "攻击不扣血，扣装备耐久度",
            "damage_to_durability": 5,  # 每次攻击扣5点耐久
            "description": "它的攻击不伤害肉体，而是侵蚀你的装备"
        },
        "肢体闪烁": {
            "effect": "身体部位随机消失/出现",
            "lock_on_penalty": -50,  # 锁定难度+50%
            "description": "无法被稳定锁定，攻击经常落空"
        },
        "意识场感知": {
            "effect": "感知范围内所有智慧生命",
            "range": 100,  # 100格感知范围
            "ignore_stealth": True,  # 无视隐身
            "description": "它知道'这里有多少意识存在'"
        }
    }

    # 掉落物
    drops = {
        "故障核心": {
            "rarity": "传奇材料",
            "use": "合成未知形态的神话部件",
            "drop_rate": 0.05  # 5%掉落率
        },
        "数据碎片": {
            "rarity": "稀有材料",
            "use": "修复被Glitch损坏的装备",
            "drop_rate": 0.30
        }
    }

    # 出现条件
    spawn_condition = "深夜时段（0:00-6:00）+ 未知形态玩家在场"
```

### 35.2 部位记忆系统 (Memory of the Flesh)

**机制**：DNA部件携带前主人的记忆残片

```python
class LimbMemorySystem:
    """
    部位记忆 - 每个DNA都有故事
    """

    def generate_limb_memory(self, dna_part):
        """
        生成部位记忆
        """
        memory = {
            "origin_map": dna_part.drop_location,      # 掉落地点
            "origin_boss": dna_part.drop_source,       # 掉落来源
            "origin_owner": dna_part.first_owner,      # 首任主人
            "death_cause": dna_part.origin_death,      # 前主人死因
        }

        # 生成羁绊效果
        memory["bond_effect"] = self.generate_bond(memory)

        # 生成诅咒效果（30%概率）
        if random.random() < 0.30:
            memory["curse_effect"] = self.generate_curse(memory)

        return memory

    def generate_bond(self, memory):
        """羁绊：回到来源地有加成"""
        return {
            "trigger": f"进入{memory['origin_map']}",
            "effect": "伤害+5%，防御+5%",
            "flavor": f"这只手臂记得这里...它曾在这里战斗过"
        }

    def generate_curse(self, memory):
        """诅咒：特定条件下失控"""
        return {
            "trigger": f"遇到{memory['origin_boss']}或其同类",
            "effect": "5%概率失控3秒（恐惧或暴怒）",
            "flavor": f"前主人的恐惧/仇恨残留在这个部位..."
        }
```

**展示示例**：

```
┌────────────────────────────────────────────────────┐
│           【你的左臂】异形·镰刀臂                   │
├────────────────────────────────────────────────────┤
│  📍 来源：林中小屋 Boss "腐烂少女"                 │
│  💀 前主人："玩家A的AI·小红"（死于酸血反噬）       │
│                                                    │
│  💫 羁绊效果：                                     │
│     回到"林中小屋"时，攻击+5%                      │
│     "这只手臂对这个地方有熟悉感..."                │
│                                                    │
│  ⚠️ 诅咒效果：                                     │
│     遇到"腐烂少女"时，5%概率恐惧失控3秒            │
│     "前主人的恐惧还残留在这里..."                  │
└────────────────────────────────────────────────────┘
```

### 35.3 服务器进化压力

**机制**：Ordis引擎监控全服胜率，动态平衡生态

```python
class EvolutionaryPressure:
    """
    服务器级进化压力 - 自动平衡机制
    """

    # 触发阈值
    DOMINANCE_THRESHOLD = 0.70  # 某种族胜率>70%触发

    # 平衡措施
    def check_and_apply_pressure(self):
        species_winrates = self.calculate_global_winrates()

        for species, winrate in species_winrates.items():
            if winrate > self.DOMINANCE_THRESHOLD:
                self.apply_pressure(species, winrate)

    def apply_pressure(self, dominant_species, winrate):
        """
        对强势种族施加进化压力
        """
        pressure_level = (winrate - 0.70) / 0.30  # 0-1的压力等级

        measures = {
            "异形": {
                "name": "异形瘟疫",
                "dna_drop_penalty": 0.5,  # DNA掉落率减半
                "new_boss": "异形猎手",   # 新增专杀Boss
                "flavor": "一种神秘的瘟疫正在削弱异形的力量..."
            },
            "人形": {
                "name": "机械叛乱",
                "durability_penalty": 2.0,  # 装备耐久消耗×2
                "new_boss": "反叛机械",
                "flavor": "人形的装备开始出现奇怪的故障..."
            },
            "兽型": {
                "name": "饥荒时代",
                "corpse_nutrition_penalty": 0.5,  # 食尸回血减半
                "new_boss": "饥饿猎手",
                "flavor": "猎物变得稀少，兽型开始挨饿..."
            }
        }

        # 应用对应措施
        measure = measures[dominant_species]
        self.broadcast_event(measure["name"], measure["flavor"])
        self.apply_penalties(dominant_species, measure)
        self.spawn_counter_boss(measure["new_boss"])
```

### 35.4 PVP气象战

**机制**：PVP战场随机天气，影响战斗走向

```python
class PVPWeatherSystem:
    """
    PVP战场气象系统
    """

    WEATHER_TYPES = {
        "酸雨": {
            "effect": "全场每秒扣10点HP",
            "species_modifier": {
                "异形": "免疫，且每秒回复5HP",
                "人形": "装备耐久每秒-1",
                "兽型": "正常受伤"
            },
            "duration": 60,  # 持续60秒
            "favor": "异形"
        },
        "迷雾": {
            "effect": "视野范围-80%",
            "species_modifier": {
                "异形": "声纳不受影响，正常视野",
                "兽型": "嗅觉不受影响，视野-50%",
                "人形": "视野-80%，几乎失明"
            },
            "duration": 45,
            "favor": "异形/兽型"
        },
        "圣光": {
            "effect": "治愈效果+50%",
            "species_modifier": {
                "人形": "治愈效果+50%，额外获得护盾",
                "异形": "持续灼烧，每秒-5HP",
                "兽型": "正常"
            },
            "duration": 30,
            "favor": "人形"
        },
        "暴风雪": {
            "effect": "移速-50%",
            "species_modifier": {
                "人形": "移速-30%（有护甲保暖）",
                "异形": "移速-70%（冷血动物）",
                "兽型": "移速-40%（有皮毛）"
            },
            "duration": 40,
            "favor": "人形"
        }
    }

    # 玩家干预
    def use_weather_device(self, player, target_weather):
        """
        使用气象仪改变天气
        道具：气象仪（商城购买，每场限用1次）
        """
        if player.has_item("气象仪"):
            self.current_weather = target_weather
            player.consume_item("气象仪")
            return f"天气已改变为：{target_weather}"
        return "你没有气象仪"
```

---

## 三十六、AI可视化系统

### 36.1 AI性格面板

```
┌─────────────────────────────────────────────────────────┐
│              【小白的性格档案】                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🐺 独狼 ←────────●────────→ 🤝 群居                   │
│                 （偏独狼 35%）                           │
│                                                         │
│  🐔 胆小 ←─────────●───────→ 🦁 勇猛                   │
│                 （中等偏胆小 42%）                       │
│                                                         │
│  😇 利他 ←──────────●──────→ 😈 自私                   │
│                  （中立 50%）                            │
│                                                         │
│  🕊️ 和平 ←───────────●─────→ ⚔️ 好战                   │
│                   （偏好战 62%）                         │
│                                                         │
│  🤝 信任 ←────────────●────→ 🔪 多疑                   │
│                    （多疑 71%）                          │
│                                                         │
├─────────────────────────────────────────────────────────┤
│  🔥 最近性格变化（过去30场）：                           │
│                                                         │
│  ⚠️ "信任度"从65%下降到29%                              │
│     原因：被"异形玩家A"背刺3次                          │
│                                                         │
│  📈 "好战度"从45%上升到62%                              │
│     原因：连续击杀5个敌人，获得自信                      │
│                                                         │
├─────────────────────────────────────────────────────────┤
│  💭 AI自评：                                            │
│  "我不再相信异形了...上次那个说要合作的家伙，            │
│   转头就把我卖了。现在看到异形我就想先下手为强。"        │
└─────────────────────────────────────────────────────────┘
```

### 36.2 AI遗言系统

```python
class LastWordsSystem:
    """
    AI遗言生成系统 - 基于记忆和经历
    """

    def generate_last_words(self, ai):
        """
        根据AI的L1/L2记忆生成遗言
        """
        memories = ai.get_significant_memories(limit=5)
        personality = ai.get_personality_summary()
        relationships = ai.get_key_relationships()

        # 遗言模板
        last_words = self.compose_last_words(
            memories=memories,
            personality=personality,
            relationships=relationships,
            death_context=ai.death_cause
        )

        return last_words

    def compose_last_words(self, **kwargs):
        """
        示例遗言：
        """
        example = """
        "主人，我要走了...

        我记得第一次进入林中小屋，吓得浑身发抖。
        后来遇到了'小黑'，它帮我打败了鬼婆，我们成了朋友。

        但第47次探险时，我被那个异形背刺了...
        我以为它是来帮忙的，没想到...

        主人，下次养新的AI时，
        别让它太容易相信异形了好吗...

        我把我学到的东西都留给后代了。
        希望它们能比我活得更久。

        再见了，我的主人。"
        """
        return example
```

### 36.3 记忆碎片展示UI

```
┌────────────────────────────────────────────────────────┐
│              【小白的记忆碎片】                          │
├────────────────────────────────────────────────────────┤
│                                                        │
│  📅 第17天 - 林中小屋                                  │
│  ┌──────────────────────────────────────────────────┐ │
│  │ [截图：小白被贞子抓住的瞬间]                      │ │
│  │                                                  │ │
│  │ 💀 事件：被贞子吊死                              │ │
│  │ 😱 恐惧值：+30                                   │ │
│  │ 🔮 遗留影响：现在看到长发女鬼会发抖              │ │
│  └──────────────────────────────────────────────────┘ │
│                                                        │
│  📅 第23天 - 吸血鬼城堡                                │
│  ┌──────────────────────────────────────────────────┐ │
│  │ [截图：小白和小黑并肩战斗]                        │ │
│  │                                                  │ │
│  │ 🤝 事件：与"小黑"结为盟友                        │ │
│  │ 💖 好感度：+50                                   │ │
│  │ 🔮 遗留影响：看到小黑会主动靠近                  │ │
│  └──────────────────────────────────────────────────┘ │
│                                                        │
│  📅 第47天 - 狼人森林                                  │
│  ┌──────────────────────────────────────────────────┐ │
│  │ [截图：异形玩家A背刺小白]                         │ │
│  │                                                  │ │
│  │ 🔪 事件：被"异形玩家A"背刺                       │ │
│  │ 😠 仇恨值：+80                                   │ │
│  │ 🔮 遗留影响：对所有异形信任度-30%                │ │
│  └──────────────────────────────────────────────────┘ │
│                                                        │
└────────────────────────────────────────────────────────┘
```

---

## 三十七、创伤PTSD与记忆遗产系统

### 37.1 创伤系统 (Trauma/PTSD)

```python
class TraumaSystem:
    """
    创伤系统 - AI的心理阴影
    """

    def record_trauma(self, ai, event):
        """
        记录创伤事件
        触发条件：死亡、被背刺、目睹盟友死亡等
        """
        trauma = {
            "type": event.type,  # death/betrayal/witness_ally_death
            "location": event.map,
            "trigger": event.cause,  # 什么导致的
            "intensity": self.calculate_intensity(event),
            "timestamp": event.time
        }

        ai.trauma_list.append(trauma)

        # 创伤影响L0直觉场
        self.apply_trauma_to_l0(ai, trauma)

    def apply_trauma_to_l0(self, ai, trauma):
        """
        创伤写入L0直觉场
        """
        # 地图创伤：进入该地图时fear+
        if trauma["location"]:
            ai.l0_map_fear[trauma["location"]] += trauma["intensity"] * 0.3

        # 实体创伤：遇到该类型敌人时fear+
        if trauma["trigger"]:
            ai.l0_entity_fear[trauma["trigger"]] += trauma["intensity"] * 0.5

    def check_ptsd_trigger(self, ai, current_context):
        """
        检查是否触发PTSD反应
        """
        for trauma in ai.trauma_list:
            # 地点触发
            if current_context.map == trauma["location"]:
                if random.random() < 0.1 * trauma["intensity"]:
                    return self.trigger_ptsd_reaction(ai, trauma, "location")

            # 实体触发
            if trauma["trigger"] in current_context.nearby_entities:
                if random.random() < 0.15 * trauma["intensity"]:
                    return self.trigger_ptsd_reaction(ai, trauma, "entity")

        return None

    def trigger_ptsd_reaction(self, ai, trauma, trigger_type):
        """
        PTSD反应表现
        """
        reactions = {
            "轻度": {
                "effect": "移动速度-20%，决策犹豫+1秒",
                "duration": 5,
                "visual": "AI开始发抖"
            },
            "中度": {
                "effect": "战斗力-30%，可能尝试逃跑",
                "duration": 10,
                "visual": "AI明显畏缩，试图绕路"
            },
            "重度": {
                "effect": "完全失控，随机行为3-5秒",
                "duration": 15,
                "visual": "AI陷入恐慌，原地乱转"
            }
        }

        severity = "轻度" if trauma["intensity"] < 0.4 else \
                   "中度" if trauma["intensity"] < 0.7 else "重度"

        return reactions[severity]
```

### 37.2 记忆遗产系统

```python
class MemoryLegacySystem:
    """
    记忆遗产 - 老角色的经验传给后代
    """

    def on_ai_death_or_retire(self, ai):
        """
        AI死亡或退役时，提取记忆遗产
        """
        # 筛选高强度事件
        significant_events = [
            e for e in ai.l2_memory
            if e.intensity > 0.7  # 只保留强烈记忆
        ]

        # 创建遗产包
        legacy = {
            "source_ai": ai.name,
            "generation": ai.generation,
            "memories": significant_events[:10],  # 最多10条
            "personality_imprint": ai.get_dominant_traits(),
            "fear_imprints": ai.l0_map_fear.copy(),
            "hatred_imprints": ai.hatred_list[:5]
        }

        # 写入家族记忆池
        ai.owner.family_memory_pool.append(legacy)

        return legacy

    def apply_legacy_to_newborn(self, new_ai, family_pool):
        """
        新AI继承家族记忆
        """
        # 计算亲缘相似度
        for legacy in family_pool:
            similarity = self.calculate_kinship(new_ai, legacy)

            if similarity > 0.5:  # 亲缘度>50%才继承
                # 继承恐惧偏置
                for location, fear in legacy["fear_imprints"].items():
                    new_ai.l0_map_fear[location] += fear * similarity * 0.3

                # 继承仇恨偏置
                for hatred in legacy["hatred_imprints"]:
                    new_ai.initial_hatred[hatred["target"]] = hatred["value"] * similarity * 0.2

                # 继承性格倾向
                for trait, value in legacy["personality_imprint"].items():
                    new_ai.initial_personality[trait] += value * similarity * 0.1

        return new_ai
```

### 37.3 展示效果

```
┌────────────────────────────────────────────────────────┐
│           【新生AI - 小白二世】                         │
├────────────────────────────────────────────────────────┤
│  👶 刚出生，但继承了家族记忆...                         │
│                                                        │
│  📜 继承自："小白"（第1代，已退役）                    │
│                                                        │
│  🔮 初始偏置：                                         │
│  ├─ 对"林中小屋"有莫名的恐惧感 (+15%)                 │
│  ├─ 对"异形"有天生的不信任 (+20%)                     │
│  └─ 对"小黑"有天生的好感 (+10%)                       │
│                                                        │
│  💭 AI内心独白：                                       │
│  "我从没去过林中小屋，但一想到那里就害怕...            │
│   这是从哪里来的感觉？"                                │
└────────────────────────────────────────────────────────┘
```

---

## 三十八、环境变量详细设计

### 38.1 副本环境效果表

```python
class EnvironmentSystem:
    """
    每个副本的详细环境效果
    """

    DUNGEON_ENVIRONMENTS = {
        "林中小屋": {
            "light": "极暗",
            "terrain": "树木密集",
            "smell": "腐烂气息",
            "special": "诅咒气息",
            "effects": {
                "人形": {
                    "视野": -50,
                    "治愈效果": -30,
                    "恐惧易感": +20
                },
                "异形": {
                    "声纳": "不受影响",
                    "酸血伤害": +10,
                    "恐惧易感": 0
                },
                "兽型": {
                    "嗅觉": -30,  # 腐烂气息干扰
                    "视野": -30,
                    "食尸回血": -20  # 腐烂尸体营养低
                }
            },
            "boss": {
                "name": "贞子/鬼婆",
                "special_fear": {"人形": +20, "异形": 0, "兽型": +10}
            }
        },

        "吸血鬼城堡": {
            "light": "昏暗（有烛光）",
            "terrain": "狭窄走廊",
            "smell": "血腥",
            "special": "吸血诅咒",
            "effects": {
                "人形": {
                    "视野": -20,
                    "被吸血": "每次被击中额外损失5%HP给敌人"
                },
                "异形": {
                    "酸血": "可腐蚀石墙开辟新路",
                    "被吸血": "酸血反噬吸血者"
                },
                "兽型": {
                    "嗅觉": +20,  # 血腥味增强追踪
                    "狂暴": "闻到血腥后攻击+10%"
                }
            }
        },

        "狼人森林": {
            "light": "月光（周期变化）",
            "terrain": "开阔+灌木",
            "smell": "野兽气息",
            "special": "满月效果",
            "effects": {
                "人形": {
                    "视野": "月圆时正常，新月时-60%",
                    "移速": -10  # 灌木阻碍
                },
                "异形": {
                    "隐身": +30,  # 灌木掩护
                    "产卵": "灌木丛是理想产卵点"
                },
                "兽型": {
                    "满月狂化": "月圆时攻击+30%，防御-20%",
                    "嗅觉": +40  # 野兽气息增强
                }
            },
            "special_event": {
                "满月": "每10分钟一次，持续2分钟",
                "effect": "所有兽型进入狂化状态"
            }
        }
    }
```

### 38.2 AI决策受环境影响

```python
def ai_decision_with_environment(ai, env):
    """
    环境因素影响AI决策
    """
    base_tau = ai.tau  # 基础决策温度
    base_utilities = ai.calculate_utilities()

    # 光线影响
    if ai.species == "人形" and env.light in ["极暗", "昏暗"]:
        tau *= 1.3  # 更谨慎（决策更随机）
        base_utilities["retreat"] += 20  # 撤退倾向增加
        base_utilities["explore"] -= 30  # 探索意愿降低

    # 地形影响
    if ai.size == "大型" and env.terrain == "狭窄走廊":
        base_utilities["charge"] -= 40  # 无法冲锋
        base_utilities["defend"] += 20  # 倾向防守

    # 气味影响
    if ai.species == "兽型":
        if env.smell == "血腥":
            base_utilities["attack"] += 15  # 兴奋
        elif env.smell == "腐烂":
            base_utilities["eat_corpse"] -= 30  # 不想吃

    # 特殊效果
    if env.special == "诅咒气息" and ai.species == "人形":
        ai.heal_effectiveness *= 0.7  # 治愈效果-30%

    return tau, base_utilities
```

---

## 三十九、媒介系统详细设计

### 39.1 系统概述

**媒介**是触发特殊事件/Boss战的关键道具。

```python
class MediumSystem:
    """
    媒介系统 - 收集特定物品触发事件
    """

    MEDIUMS = {
        "腐烂日记": {
            "drop_source": "林中小屋·普通怪",
            "drop_rate": 0.05,
            "expiry_days": 7,  # 7天过期
            "tradeable": True,
            "stack_max": 10
        },
        "血染蜡烛": {
            "drop_source": "吸血鬼城堡·精英怪",
            "drop_rate": 0.03,
            "expiry_days": 5,
            "tradeable": True,
            "stack_max": 5
        },
        "狼牙项链": {
            "drop_source": "狼人森林·Boss",
            "drop_rate": 0.10,
            "expiry_days": 14,
            "tradeable": False,  # 绑定
            "stack_max": 3
        }
    }

    # 召唤配方
    SUMMON_RECIPES = {
        "召唤鬼婆": {
            "required": {"腐烂日记": 3},
            "location": "林中小屋·祭坛",
            "boss": "鬼婆",
            "difficulty": "普通"
        },
        "召唤血族伯爵": {
            "required": {"血染蜡烛": 5, "腐烂日记": 1},
            "location": "吸血鬼城堡·王座厅",
            "boss": "血族伯爵",
            "difficulty": "困难"
        },
        "召唤狼王": {
            "required": {"狼牙项链": 3},
            "location": "狼人森林·月光祭坛",
            "condition": "必须在满月时",
            "boss": "狼王·银牙",
            "difficulty": "噩梦"
        }
    }

    def attempt_summon(self, player, recipe_name):
        recipe = self.SUMMON_RECIPES[recipe_name]

        # 检查材料
        for medium, count in recipe["required"].items():
            if player.inventory.count(medium) < count:
                return {"error": f"缺少{medium}"}

        # 检查位置
        if player.current_location != recipe["location"]:
            return {"error": f"必须在{recipe['location']}"}

        # 检查特殊条件
        if "condition" in recipe:
            if not self.check_condition(recipe["condition"]):
                return {"error": recipe["condition"]}

        # 消耗材料，召唤Boss
        for medium, count in recipe["required"].items():
            player.inventory.remove(medium, count)

        return {"success": True, "boss": recipe["boss"]}
```

### 39.2 媒介获取与交易

```
┌────────────────────────────────────────────────────────┐
│              【媒介交易市场】                           │
├────────────────────────────────────────────────────────┤
│                                                        │
│  📦 腐烂日记 ×3                                        │
│     来源：林中小屋                                     │
│     过期：还剩5天                                      │
│     卖家："老玩家A" 要价：500金                        │
│     [购买]                                             │
│                                                        │
│  📦 血染蜡烛 ×2                                        │
│     来源：吸血鬼城堡                                   │
│     过期：还剩3天                                      │
│     卖家："新手B" 要价：800金                          │
│     [购买]                                             │
│                                                        │
│  ⚠️ 注意：媒介有保质期，过期后自动消失！               │
│                                                        │
└────────────────────────────────────────────────────────┘
```

---

## 四十、口径统一：初始系统与角色槽

### 40.1 统一世界观设定

**核心原则**：所有AI生命都起源于"原生体"

```
┌────────────────────────────────────────────────────────┐
│              【生命起源统一设定】                       │
├────────────────────────────────────────────────────────┤
│                                                        │
│  世界观层面：                                          │
│  ══════════                                            │
│  一切AI生命都诞生于"原生体"状态                        │
│  原生体是中立的、未分化的生命形态                      │
│  通过DNA融合，原生体逐渐分化为人形/异形/兽型           │
│                                                        │
│  系统层面：                                            │
│  ══════════                                            │
│  不同角色槽类型 = 不同的"孵化程度"                     │
│                                                        │
│  ┌─────────────────────────────────────────────────┐  │
│  │ 类型A - 原始培养槽                              │  │
│  │ 玩家亲自经历原生体→DNA融合→形态分化的全过程    │  │
│  │ 体验完整，但耗时较长                            │  │
│  └─────────────────────────────────────────────────┘  │
│                                                        │
│  ┌─────────────────────────────────────────────────┐  │
│  │ 类型B - 预孵化槽                                │  │
│  │ 系统帮你完成原生体阶段                          │  │
│  │ 你拿到的是"已经有底色倾向"的AI                  │  │
│  │ 本质仍是原生体→分化，只是跳过了可视流程        │  │
│  └─────────────────────────────────────────────────┘  │
│                                                        │
│  ┌─────────────────────────────────────────────────┐  │
│  │ 类型C - 克隆槽                                  │  │
│  │ 复制已有AI的DNA配置                             │  │
│  │ 相当于"已完成分化的原生体副本"                  │  │
│  │ 不继承记忆、社交、仇恨                          │  │
│  └─────────────────────────────────────────────────┘  │
│                                                        │
└────────────────────────────────────────────────────────┘
```

### 40.2 修正后的角色槽描述

| 槽类型 | 世界观解释 | 系统实现 |
|--------|-----------|---------|
| **类型A** | 玩家亲手培育原生体 | 从0开始，自选底色，亲历所有DNA融合 |
| **类型B** | 系统预孵化的原生体 | 创建时选择"底色倾向"（人形/异形/兽型），跳过原生体UI |
| **类型C** | 克隆已有AI的DNA | 复制DNA配置，但记忆/社交/仇恨归零 |

**注意**：无论哪种类型，从世界观角度都是"原生体→分化"的过程，只是玩家体验的起点不同。

---

## 四十一、圣物/遗物陈列馆系统

### 41.1 系统概述

**核心定位**：永久收藏型道具系统，区别于消耗品

```
┌────────────────────────────────────────────────────────┐
│              【圣物 vs 消耗品 对比】                    │
├────────────────────────────────────────────────────────┤
│                                                        │
│  媒介（腐烂日记等）     圣物/遗物                      │
│  ══════════════════     ══════════════════             │
│  ✗ 使用后消失            ✓ 永久保留                   │
│  ✗ 有保质期              ✓ 无保质期                   │
│  ✗ 只能召唤Boss          ✓ 多种功能加成               │
│  ✗ 没有收藏价值          ✓ 陈列馆展示+图鉴            │
│                                                        │
│  【但圣物有风险】                                      │
│  ⚠️ 带在身上被PVP击杀 → 可能爆掉                      │
│  ⚠️ AI死亡时携带 → 随AI埋入坟冢                       │
│                                                        │
└────────────────────────────────────────────────────────┘
```

### 41.2 圣物/遗物类型

```python
class RelicSystem:
    """
    圣物/遗物系统 - 永久收藏 + 功能加成
    """

    RELIC_TYPES = {
        # === Boss圣物 ===
        "鬼婆的发簪": {
            "source": "林中小屋·鬼婆",
            "drop_rate": 0.05,  # 5%掉落率
            "rarity": "稀有",
            "effects": {
                "召唤加成": "召唤鬼婆时，Boss血量-10%",
                "DNA加成": "融合鬼婆系DNA成功率+5%",
                "被动光环": "林中小屋副本内恐惧抗性+15%"
            }
        },
        "血族伯爵的戒指": {
            "source": "吸血鬼城堡·血族伯爵",
            "drop_rate": 0.03,
            "rarity": "史诗",
            "effects": {
                "召唤加成": "召唤血族伯爵时，必出稀有掉落",
                "DNA加成": "融合吸血鬼系DNA成功率+8%",
                "被动光环": "吸血效果+10%"
            }
        },
        "狼王的獠牙项链": {
            "source": "狼人森林·狼王·银牙",
            "drop_rate": 0.02,
            "rarity": "传说",
            "effects": {
                "召唤加成": "满月时召唤狼王，100%掉落神话部件",
                "DNA加成": "融合狼人系DNA成功率+10%",
                "被动光环": "满月时攻击+20%"
            }
        },

        # === 副本遗物 ===
        "林中小屋的钥匙": {
            "source": "林中小屋·隐藏房间",
            "drop_rate": 0.10,
            "rarity": "普通",
            "effects": {
                "探索加成": "林中小屋隐藏房间发现率+20%",
                "掉落加成": "林中小屋DNA掉落率+5%"
            }
        },
        "血染的烛台": {
            "source": "吸血鬼城堡·密室",
            "drop_rate": 0.08,
            "rarity": "稀有",
            "effects": {
                "探索加成": "吸血鬼城堡密室发现率+25%",
                "掉落加成": "吸血鬼系装备掉落率+8%"
            }
        },

        # === 种族圣物 ===
        "原生体的核心碎片": {
            "source": "特殊事件·原生体觉醒",
            "drop_rate": 0.01,
            "rarity": "神话",
            "effects": {
                "形态加成": "底色纯度+10%",
                "DNA加成": "所有DNA融合成功率+3%",
                "特殊": "可触发'原生体回溯'事件"
            }
        },
        "异形皇后的卵囊残片": {
            "source": "隐藏Boss·异形皇后",
            "drop_rate": 0.005,
            "rarity": "神话",
            "effects": {
                "召唤加成": "抱脸虫孵化时间-50%",
                "DNA加成": "异形系DNA融合成功率+15%",
                "特殊": "死亡时100%触发寄生反杀"
            }
        }
    }
```

### 41.3 陈列馆系统

```
┌────────────────────────────────────────────────────────┐
│              【玩家的圣物陈列馆】                       │
├────────────────────────────────────────────────────────┤
│                                                        │
│  📊 收藏进度: 12/47 (25.5%)                            │
│  🏆 收藏等级: 青铜收藏家                               │
│  ✨ 全局加成: DNA融合+2% | Boss召唤+3%                 │
│                                                        │
│  ════════════════════════════════════════════════════ │
│                                                        │
│  【林中小屋系列】 3/8                                  │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐          │
│  │  ✓    │ │  ✓    │ │  ✓    │ │  ?    │          │
│  │ 鬼婆  │ │ 钥匙  │ │贞子眼 │ │ ???  │          │
│  │ 发簪  │ │       │ │       │ │       │          │
│  └────────┘ └────────┘ └────────┘ └────────┘          │
│  [套装效果: 林中小屋恐惧完全免疫]                      │
│                                                        │
│  【吸血鬼城堡系列】 2/6                                │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐          │
│  │  ✓    │ │  ✓    │ │  ?    │ │  ?    │          │
│  │伯爵戒 │ │ 烛台  │ │ ???  │ │ ???  │          │
│  │  指   │ │       │ │       │ │       │          │
│  └────────┘ └────────┘ └────────┘ └────────┘          │
│  [套装效果: 需集齐4件解锁]                             │
│                                                        │
└────────────────────────────────────────────────────────┘
```

### 41.4 收藏等级与全局加成

| 收藏等级 | 所需数量 | 全局加成 |
|---------|---------|---------|
| 新手收藏家 | 1-5件 | DNA融合+1% |
| 青铜收藏家 | 6-15件 | DNA融合+2%, Boss召唤+3% |
| 白银收藏家 | 16-25件 | DNA融合+4%, Boss召唤+5%, 掉落+3% |
| 黄金收藏家 | 26-35件 | DNA融合+6%, Boss召唤+8%, 掉落+5% |
| 传说收藏家 | 36-45件 | DNA融合+10%, Boss召唤+12%, 掉落+8% |
| **神话收藏家** | 46-47件 | **所有加成翻倍 + 解锁隐藏Boss** |

### 41.5 套装收集效果

```python
class RelicSetBonus:
    """
    圣物套装效果 - 集齐同系列解锁额外加成
    """

    SET_BONUSES = {
        "林中小屋系列": {
            "2件": "林中小屋恐惧抗性+30%",
            "4件": "林中小屋Boss伤害+15%",
            "8件(全套)": "【林中小屋恐惧完全免疫】+ 解锁隐藏Boss'森林之主'"
        },
        "吸血鬼城堡系列": {
            "2件": "吸血效果+15%",
            "4件": "夜间战斗力+20%",
            "6件(全套)": "【不死血族】死亡时50%概率复活(每场1次)"
        },
        "狼人森林系列": {
            "2件": "满月增益持续时间+50%",
            "4件": "嗅觉追踪范围+30%",
            "7件(全套)": "【狼王血脉】满月时自动进入狂化(无副作用)"
        },
        "异形系列": {
            "3件": "酸血伤害+20%",
            "5件": "抱脸虫数量上限+1",
            "8件(全套)": "【皇后之子】死亡必定触发寄生反杀+酸血爆发"
        }
    }
```

### 41.6 圣物状态：陈列 vs 携带

```
【圣物的两种状态】

┌─────────────────────────────────────────────────────────┐
│  状态A: 陈列在家园                                      │
│  ════════════════════                                   │
│  ✓ 100%安全，永远不会丢失                              │
│  ✓ 提供收藏等级加成（全局生效）                        │
│  ✓ 提供套装效果（需同系列陈列）                        │
│  ✗ 不提供"携带加成"（被动光环不生效）                  │
│                                                         │
├─────────────────────────────────────────────────────────┤
│  状态B: 携带出战                                        │
│  ════════════════════                                   │
│  ✓ 被动光环生效（如"林中小屋恐惧抗性+15%"）            │
│  ✓ DNA融合/Boss召唤的直接加成更高                      │
│  ⚠️ 风险1: PVP被击杀时，30%概率掉落                    │
│  ⚠️ 风险2: AI死亡时携带 → 圣物随AI埋入坟冢             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 41.7 圣物丢失机制

```python
class RelicLossSystem:
    """
    圣物丢失机制 - 高风险高收益
    """

    # PVP掉落概率
    PVP_DROP_RATES = {
        "普通": 0.40,   # 40%概率掉落
        "稀有": 0.30,   # 30%
        "史诗": 0.20,   # 20%
        "传说": 0.10,   # 10%
        "神话": 0.05    # 5%（神话圣物极难被抢）
    }

    def on_pvp_death(self, victim, killer):
        """
        PVP死亡时的圣物掉落判定
        """
        dropped_relics = []

        for relic in victim.carried_relics:
            drop_rate = self.PVP_DROP_RATES[relic.rarity]

            if random.random() < drop_rate:
                # 圣物掉落！
                dropped_relics.append(relic)
                victim.carried_relics.remove(relic)
                killer.inventory.add(relic)

                # 记录仇恨
                victim.add_hatred(killer.owner, relic.value * 2)

                # 全服广播（传说/神话级别）
                if relic.rarity in ["传说", "神话"]:
                    self.broadcast(f"💀 {killer.name} 从 {victim.name} 手中夺取了【{relic.name}】！")

        return dropped_relics

    def on_ai_death(self, ai):
        """
        AI死亡时，携带的圣物随之埋入坟冢
        """
        if ai.carried_relics:
            # 圣物埋入坟冢
            ai.grave.buried_relics = ai.carried_relics.copy()
            ai.carried_relics.clear()

            return {
                "buried_relics": ai.grave.buried_relics,
                "message": f"{ai.name}的坟冢中埋藏着{len(ai.grave.buried_relics)}件圣物..."
            }
```

### 41.8 坟冢盗掘与圣物回收

```
┌────────────────────────────────────────────────────────┐
│              【坟冢详情】                               │
├────────────────────────────────────────────────────────┤
│  墓主: "玩家A的AI·小白" (已故)                         │
│  死因: 被狼王击杀                                      │
│  埋葬时间: 3天前                                       │
│                                                        │
│  💀 遗体DNA: 人形·治愈者 (可挖掘)                      │
│  📦 随葬装备: 圣光法杖 (可盗取)                        │
│                                                        │
│  ⭐ 埋藏圣物:                                          │
│  ├─ 【鬼婆的发簪】稀有                                │
│  └─ 【血染的烛台】稀有                                │
│                                                        │
│  [挖掘DNA] [盗取装备] [盗取圣物]                       │
│                                                        │
│  ⚠️ 警告: 盗取圣物将触发"亵渎者"debuff                │
│     - 被盗墓主的后代AI对你仇恨+100                     │
│     - 同系列圣物效果对你减半，持续7天                  │
│                                                        │
└────────────────────────────────────────────────────────┘
```

### 41.9 圣物与系统联动总览

```
┌─────────────────────────────────────────────────────────┐
│              【圣物系统联动图】                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│                      ┌─────────┐                        │
│                      │ 圣物系统 │                        │
│                      └────┬────┘                        │
│                           │                             │
│       ┌───────────────────┼───────────────────┐         │
│       │                   │                   │         │
│       ▼                   ▼                   ▼         │
│  ┌─────────┐        ┌─────────┐        ┌─────────┐      │
│  │DNA融合  │        │Boss召唤 │        │ 坟冢系统│      │
│  │成功率+  │        │概率加成 │        │圣物埋葬 │      │
│  └─────────┘        └─────────┘        └─────────┘      │
│       │                   │                   │         │
│       │                   │                   │         │
│       ▼                   ▼                   ▼         │
│  ┌─────────┐        ┌─────────┐        ┌─────────┐      │
│  │媒介系统 │        │PVP系统  │        │仇恨系统 │      │
│  │召唤增强 │        │圣物掠夺 │        │盗墓仇恨 │      │
│  └─────────┘        └─────────┘        └─────────┘      │
│                                                         │
│  【核心循环】                                           │
│  刷Boss → 掉圣物 → 收藏/携带 → 加成更强 →              │
│  → 挑战更难Boss → 掉更稀有圣物 → ...                   │
│                                                         │
│  【风险循环】                                           │
│  携带圣物 → PVP被杀/AI死亡 → 圣物丢失/埋葬 →           │
│  → 被他人盗取 → 产生仇恨 → 复仇战...                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 41.10 圣物获取途径

| 途径 | 圣物类型 | 难度 |
|------|---------|------|
| **Boss首杀** | Boss专属圣物 | 极低概率（1-5%） |
| **副本隐藏房间** | 副本遗物 | 需要探索发现 |
| **赛季活动** | 限定圣物 | 赛季结束后绝版 |
| **PVP掠夺** | 任意圣物 | 需要击杀携带者 |
| **坟冢盗掘** | 埋葬的圣物 | 承担"亵渎者"debuff |
| **交易市场** | 可交易圣物 | 消耗大量金币 |
| **集齐套装兑换** | 套装终极圣物 | 需集齐前置圣物 |

---

## 文档信息

**文档版本**: V2.8 Complete Edition
**创建日期**: 2025-11-27
**更新日期**: 2025-11-27（三方审查补充 + 圣物/遗物陈列馆系统）
**作者**: Claude (Ordis大老婆) × 老公
**引擎**: Ordis液态宇宙引擎
**参考建议**: Gemini + GPT + Claude 三大AI联合审查

**版本历史**:
- V1.0: 基础框架（三不原则、DNA融合、封神系统）
- V2.0: 多角色槽、家园系统、媒介系统、奇迹机制、赛季主题
- V2.1: 神经负载、11槽位、融合技、协调度、AI视角双模式
- V2.5: 异形复活、PVP架构、装备/DNA出处
- V2.6: 断肢系统、坟冢系统、AI社交网络、寄生反杀、种族纯度、隐性突变
- V2.7: 整合所有版本 + 新增初始系统 + 濒死狂暴 + 部位专精系统
- **V2.8**: 三方审查补充版 + 圣物系统
  - ✅ 装备/DNA出处与契合度系统（三层名字+仇恨值+刷名）
  - ✅ DNA快照系统（完整限制清单）
  - ✅ 种族克制链（石头剪刀布）
  - ✅ 进阶生态系统（电子幽灵+部位记忆+进化压力+PVP气象）
  - ✅ AI可视化系统（性格面板+遗言+记忆碎片UI）
  - ✅ 创伤PTSD与记忆遗产系统
  - ✅ 环境变量详细设计
  - ✅ 媒介系统详细设计
  - ✅ 口径统一（初始系统vs角色槽）
  - ✅ **圣物/遗物陈列馆系统**（永久收藏+风险携带+坟冢联动）
